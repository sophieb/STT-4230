---
title: "Structures de données en R"
author: "Sophie Baillargeon, Université Laval"
date: '2021-01-22'
weight: 1
slug: structures_r
lastmodifierdisplayname: Sophie Baillargeon
lastmodifieremail: sophie.baillargeon@mat.ulaval.ca
output:
  pdf_document: 
    highlight: tango
    toc: yes
    toc_depth: 3
    number_sections: yes
  blogdown::html_page:
    highlight: tango
    toc: yes
    toc_depth: 3
    number_sections: yes
bibliography: ../references.bib
csl: ../custom.csl
link-citations: true
header-includes:
- \usepackage[french]{babel}
- \frenchbsetup{StandardLayout}
- \hypersetup{colorlinks=true, urlcolor = {blue}, linkcolor = {blue}}
editor_options: 
  chunk_output_type: console
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<div id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a>
<ul>
<li><a href="#types-dobjets-r-servant-de-structure-de-données"><span class="toc-section-number">1.1</span> Types d’objets R servant de structure de données</a>
<ul>
<li><a href="#exemple-de-vecteur"><span class="toc-section-number">1.1.1</span> Exemple de vecteur</a></li>
<li><a href="#exemple-de-matrice"><span class="toc-section-number">1.1.2</span> Exemple de matrice</a></li>
<li><a href="#exemple-darray"><span class="toc-section-number">1.1.3</span> Exemple d’array</a></li>
<li><a href="#exemple-de-liste"><span class="toc-section-number">1.1.4</span> Exemple de liste</a></li>
<li><a href="#exemple-de-data-frame"><span class="toc-section-number">1.1.5</span> Exemple de data frame</a></li>
<li><a href="#exemple-de-facteur"><span class="toc-section-number">1.1.6</span> Exemple de facteur</a></li>
</ul></li>
<li><a href="#types-de-données"><span class="toc-section-number">1.2</span> Types de données</a>
<ul>
<li><a href="#données-réelles"><span class="toc-section-number">1.2.1</span> Données réelles</a></li>
<li><a href="#données-entières"><span class="toc-section-number">1.2.2</span> Données entières</a></li>
<li><a href="#données-caractères"><span class="toc-section-number">1.2.3</span> Données caractères</a></li>
<li><a href="#données-logiques"><span class="toc-section-number">1.2.4</span> Données logiques</a></li>
<li><a href="#données-manquantes"><span class="toc-section-number">1.2.5</span> Données manquantes</a></li>
</ul></li>
<li><a href="#obtention-dinformations-sur-les-objets"><span class="toc-section-number">1.3</span> Obtention d’informations sur les objets</a>
<ul>
<li><a href="#attributs-des-objets"><span class="toc-section-number">1.3.1</span> Attributs des objets</a></li>
</ul></li>
<li><a href="#extraction"><span class="toc-section-number">1.4</span> Extraction d’éléments</a>
<ul>
<li><a href="#opérateurs-dindiçage"><span class="toc-section-number">1.4.1</span> Opérateurs d’indiçage</a></li>
<li><a href="#fonctions-dextraction"><span class="toc-section-number">1.4.2</span> Fonctions d’extraction</a></li>
</ul></li>
<li><a href="#remplacement"><span class="toc-section-number">1.5</span> Remplacement d’éléments</a></li>
</ul></li>
<li><a href="#vecteurs"><span class="toc-section-number">2</span> Vecteurs</a>
<ul>
<li><a href="#obtention-dinformations"><span class="toc-section-number">2.1</span> Obtention d’informations</a></li>
<li><a href="#création"><span class="toc-section-number">2.2</span> Création</a>
<ul>
<li><a href="#fonction-c"><span class="toc-section-number">2.2.1</span> Fonction <code>c</code></a></li>
<li><a href="#fonction-vector"><span class="toc-section-number">2.2.2</span> Fonction <code>vector</code></a></li>
<li><a href="#fonction-as.vector"><span class="toc-section-number">2.2.3</span> Fonction <code>as.vector</code></a></li>
<li><a href="#fonction-rep"><span class="toc-section-number">2.2.4</span> Fonction <code>rep</code></a></li>
<li><a href="#création-de-séquences-avec-ou-seq"><span class="toc-section-number">2.2.5</span> Création de séquences avec <code>:</code> ou <code>seq</code></a></li>
<li><a href="#vecteur-de-longueur-1"><span class="toc-section-number">2.2.6</span> Vecteur de longueur 1</a></li>
</ul></li>
<li><a href="#concaténation-de-vecteurs"><span class="toc-section-number">2.3</span> Concaténation de vecteurs</a>
<ul>
<li><a href="#fonction-c-1"><span class="toc-section-number">2.3.1</span> Fonction <code>c</code></a></li>
<li><a href="#fonction-append"><span class="toc-section-number">2.3.2</span> Fonction <code>append</code></a></li>
</ul></li>
<li><a href="#métadonnées"><span class="toc-section-number">2.4</span> Métadonnées</a></li>
<li><a href="#extraction-déléments"><span class="toc-section-number">2.5</span> Extraction d’éléments</a>
<ul>
<li><a href="#un-seul-élément"><span class="toc-section-number">2.5.1</span> Un seul élément</a></li>
<li><a href="#plusieurs-éléments"><span class="toc-section-number">2.5.2</span> Plusieurs éléments</a></li>
<li><a href="#extraction-par-exclusion"><span class="toc-section-number">2.5.3</span> Extraction par exclusion</a></li>
</ul></li>
<li><a href="#vecteurs-de-chaînes-de-caractères"><span class="toc-section-number">2.6</span> Vecteurs de chaînes de caractères</a>
<ul>
<li><a href="#fonctions-paste-et-paste0"><span class="toc-section-number">2.6.1</span> Fonctions <code>paste</code> et <code>paste0</code></a></li>
</ul></li>
</ul></li>
<li><a href="#matrices"><span class="toc-section-number">3</span> Matrices</a>
<ul>
<li><a href="#obtention-dinformations-1"><span class="toc-section-number">3.1</span> Obtention d’informations</a></li>
<li><a href="#création-1"><span class="toc-section-number">3.2</span> Création</a>
<ul>
<li><a href="#fonction-matrix"><span class="toc-section-number">3.2.1</span> Fonction <code>matrix</code></a></li>
<li><a href="#fonction-as.matrix"><span class="toc-section-number">3.2.2</span> Fonction <code>as.matrix</code></a></li>
<li><a href="#fonctions-rbind-et-cbind"><span class="toc-section-number">3.2.3</span> Fonctions <code>rbind</code> et <code>cbind</code></a></li>
</ul></li>
<li><a href="#concaténation-de-matrices"><span class="toc-section-number">3.3</span> Concaténation de matrices</a>
<ul>
<li><a href="#fonctions-rbind-et-cbind-1"><span class="toc-section-number">3.3.1</span> Fonctions <code>rbind</code> et <code>cbind</code></a></li>
</ul></li>
<li><a href="#métadonnées-1"><span class="toc-section-number">3.4</span> Métadonnées</a></li>
<li><a href="#extraction-déléments-1"><span class="toc-section-number">3.5</span> Extraction d’éléments</a>
<ul>
<li><a href="#un-seul-élément-1"><span class="toc-section-number">3.5.1</span> Un seul élément</a></li>
<li><a href="#plusieurs-éléments-1"><span class="toc-section-number">3.5.2</span> Plusieurs éléments</a></li>
</ul></li>
</ul></li>
<li><a href="#arrays"><span class="toc-section-number">4</span> Arrays</a>
<ul>
<li><a href="#obtention-dinformations-2"><span class="toc-section-number">4.1</span> Obtention d’informations</a></li>
<li><a href="#création-2"><span class="toc-section-number">4.2</span> Création</a>
<ul>
<li><a href="#fonction-array"><span class="toc-section-number">4.2.1</span> Fonction <code>array</code></a></li>
<li><a href="#fonction-as.array"><span class="toc-section-number">4.2.2</span> Fonction <code>as.array</code></a></li>
</ul></li>
<li><a href="#métadonnées-2"><span class="toc-section-number">4.3</span> Métadonnées</a></li>
<li><a href="#extraction-déléments-2"><span class="toc-section-number">4.4</span> Extraction d’éléments</a></li>
</ul></li>
<li><a href="#listes"><span class="toc-section-number">5</span> Listes</a>
<ul>
<li><a href="#obtention-dinformations-3"><span class="toc-section-number">5.1</span> Obtention d’informations</a></li>
<li><a href="#création-3"><span class="toc-section-number">5.2</span> Création</a>
<ul>
<li><a href="#fonction-list"><span class="toc-section-number">5.2.1</span> Fonction <code>list</code></a></li>
<li><a href="#fonction-as.list"><span class="toc-section-number">5.2.2</span> Fonction <code>as.list</code></a></li>
<li><a href="#fonction-vector-1"><span class="toc-section-number">5.2.3</span> Fonction <code>vector</code></a></li>
</ul></li>
<li><a href="#concaténation-de-listes"><span class="toc-section-number">5.3</span> Concaténation de listes</a>
<ul>
<li><a href="#fonction-c-2"><span class="toc-section-number">5.3.1</span> Fonction <code>c</code></a></li>
</ul></li>
<li><a href="#métadonnées-3"><span class="toc-section-number">5.4</span> Métadonnées</a></li>
<li><a href="#extraction-déléments-3"><span class="toc-section-number">5.5</span> Extraction d’éléments</a>
<ul>
<li><a href="#un-seul-élément-2"><span class="toc-section-number">5.5.1</span> Un seul élément</a></li>
<li><a href="#plusieurs-éléments-2"><span class="toc-section-number">5.5.2</span> Plusieurs éléments</a></li>
<li><a href="#extraction-par-exclusion-1"><span class="toc-section-number">5.5.3</span> Extraction par exclusion</a></li>
</ul></li>
<li><a href="#conversion-en-vecteur-atomique"><span class="toc-section-number">5.6</span> Conversion en vecteur atomique</a></li>
</ul></li>
<li><a href="#data-frames"><span class="toc-section-number">6</span> Data frames</a>
<ul>
<li><a href="#jeux-de-données"><span class="toc-section-number">6.1</span> Jeux de données</a>
<ul>
<li><a href="#définitions"><span class="toc-section-number">6.1.1</span> Définitions</a></li>
<li><a href="#représentation-en-r"><span class="toc-section-number">6.1.2</span> Représentation en R</a></li>
</ul></li>
<li><a href="#obtention-dinformations-4"><span class="toc-section-number">6.2</span> Obtention d’informations</a></li>
<li><a href="#création-4"><span class="toc-section-number">6.3</span> Création</a>
<ul>
<li><a href="#fonction-data.frame"><span class="toc-section-number">6.3.1</span> Fonction <code>data.frame</code></a></li>
<li><a href="#fonction-as.data.frame"><span class="toc-section-number">6.3.2</span> Fonction <code>as.data.frame</code></a></li>
</ul></li>
<li><a href="#concaténation-de-data-frames"><span class="toc-section-number">6.4</span> Concaténation de data frames</a>
<ul>
<li><a href="#fonction-data.frame-1"><span class="toc-section-number">6.4.1</span> Fonction <code>data.frame</code></a></li>
<li><a href="#fonctions-rbind-et-cbind-2"><span class="toc-section-number">6.4.2</span> Fonctions <code>rbind</code> et <code>cbind</code></a></li>
</ul></li>
<li><a href="#métadonnées-4"><span class="toc-section-number">6.5</span> Métadonnées</a></li>
<li><a href="#extraction-déléments-4"><span class="toc-section-number">6.6</span> Extraction d’éléments</a>
<ul>
<li><a href="#en-traitant-le-data-frame-comme-une-liste"><span class="toc-section-number">6.6.1</span> En traitant le data frame comme une liste</a></li>
<li><a href="#en-traitant-le-data-frame-comme-une-matrice"><span class="toc-section-number">6.6.2</span> En traitant le data frame comme une matrice</a></li>
<li><a href="#extraction-par-exclusion-2"><span class="toc-section-number">6.6.3</span> Extraction par exclusion</a></li>
</ul></li>
<li><a href="#extensions"><span class="toc-section-number">6.7</span> Extensions</a>
<ul>
<li><a href="#tibbles"><span class="toc-section-number">6.7.1</span> Tibbles</a></li>
<li><a href="#data-tables"><span class="toc-section-number">6.7.2</span> Data tables</a></li>
</ul></li>
</ul></li>
<li><a href="#facteurs"><span class="toc-section-number">7</span> Facteurs</a>
<ul>
<li><a href="#obtention-dinformations-5"><span class="toc-section-number">7.1</span> Obtention d’informations</a></li>
<li><a href="#création-5"><span class="toc-section-number">7.2</span> Création</a>
<ul>
<li><a href="#fonctions-factor-et-as.factor"><span class="toc-section-number">7.2.1</span> Fonctions <code>factor</code> et <code>as.factor</code></a></li>
</ul></li>
<li><a href="#modification"><span class="toc-section-number">7.3</span> Modification</a>
<ul>
<li><a href="#fonction-levels"><span class="toc-section-number">7.3.1</span> Fonction <code>levels</code></a></li>
<li><a href="#réordonnancement-des-niveaux"><span class="toc-section-number">7.3.2</span> Réordonnancement des niveaux</a></li>
</ul></li>
<li><a href="#métadonnées-5"><span class="toc-section-number">7.4</span> Métadonnées</a></li>
<li><a href="#extraction-déléments-5"><span class="toc-section-number">7.5</span> Extraction d’éléments</a></li>
<li><a href="#facteurs-ordonnés"><span class="toc-section-number">7.6</span> Facteurs ordonnés</a></li>
</ul></li>
<li><a href="#conversions"><span class="toc-section-number">8</span> Conversions de type de données</a>
<ul>
<li><a href="#conversions-explicites"><span class="toc-section-number">8.1</span> Conversions explicites</a></li>
</ul></li>
<li><a href="#résumé"><span class="toc-section-number">9</span> Résumé</a></li>
<li><a href="#références">Références</a></li>
</ul>
</div>

<hr />
<p><em>Note préliminaire : Lors de leur dernière mise à jour, ces notes ont été révisées en utilisant R version 4.0.3, le package <code>tibble</code> version 3.0.5 et le package <code>data.table</code> version 1.13.6. Pour d’autres versions, les informations peuvent différer.</em></p>
<hr />
<div id="introduction" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>Le point de départ d’une analyse de données en R est d’avoir accès aux données. Ces données doivent être stockées dans un ou des objets R. Pour utiliser R, il faut donc d’abord connaître les différents types d’objets pouvant servir de « contenant à données » et savoir travailler avec ces objets.</p>
<div id="types-dobjets-r-servant-de-structure-de-données" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Types d’objets R servant de structure de données</h2>
<p>Le tableau suivant présente les différents types d’objets R servant de structure de données offerts dans le R de base, selon leur nombre de dimensions.</p>
<table>
<thead>
<tr class="header">
<th>Nombre de dimensions</th>
<th>Objets atomiques</th>
<th>Objets récursifs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><strong>vecteur</strong></td>
<td><strong>liste</strong></td>
</tr>
<tr class="even">
<td>2</td>
<td><strong>matrice</strong></td>
<td><strong>data frame</strong></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
<td></td>
</tr>
<tr class="even">
<td>n</td>
<td><strong>array</strong></td>
<td>-</td>
</tr>
</tbody>
</table>
<!--
\begin{longtable}[]{@{}lll@{}}
\toprule
Nombre de dimensions & Objets atomiques & Objets
récursifs\tabularnewline
\midrule
\endhead
1 & \textbf{vecteur} & \textbf{liste}\tabularnewline
2 & \textbf{matrice} & \textbf{data frame}\tabularnewline
\(\vdots\) & \(\vdots\) &\tabularnewline
n & \textbf{array} & -\tabularnewline
\bottomrule
\end{longtable}
-->
<p>Aux 5 types d’objets de ce tableau, il faut ajouter les <strong>facteurs</strong>. Ils sont une généralisation des vecteurs, utiles pour stocker des données catégoriques.</p>
<p>D’autres types d’objets existent dans le R de base, mais ne servent pas de structure de données, par exemple les fonctions, les expressions (comme les formules), etc.</p>
<p>Les objets dont les éléments sont contraints d’être des données toutes du même type sont qualifiés de « <strong>atomiques</strong> », alors que les autres sont qualifiés de « <strong>récursifs</strong> ». En fait, les listes sont parfois appelées « vecteurs récursifs » dans la documentation de R. Ici, le mot vecteur, non accompagné de l’adjectif récursif, fera toujours référence à un vecteur atomique.</p>
<p>Les éléments des objets récursifs sont d’autres objets. Pour une liste, ils peuvent être n’importe quoi : des vecteurs, des facteurs, des matrices, des arrays, des listes, des data frames, des fonctions, des expressions, etc. Pour un data frame, ils sont typiquement des vecteurs ou des facteurs, tous de même longueur.</p>
<p>Illustrons maintenant ces différents types d’objets servant de structure de données. De l’information détaillée sur chaque type d’objet est présentée plus loin.</p>
<div id="exemple-de-vecteur" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Exemple de vecteur</h3>
<p>Le vecteur est l’objet le plus simple. Voici un exemple de vecteur :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 3.5 7.8 9.9 5.7</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vec)</span></code></pre></div>
<pre><code>##  num [1:4] 3.5 7.8 9.9 5.7</code></pre>
<p>Il pourrait être représenté comme suit : <img src="fig/VecteurHoriz.png" /> ou encore à la verticale : <img src="fig/VecteurVerti.png" /></p>
<p>Il n’a qu’une dimension et ses éléments (représentés par les cercles bleus) sont des données toutes du même type.</p>
</div>
<div id="exemple-de-matrice" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Exemple de matrice</h3>
<p>La matrice est une généralisation à 2 dimensions du vecteur. Voici un exemple de matrice :</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mat</span></code></pre></div>
<pre><code>##       [,1]  [,2]  [,3]
## [1,]  TRUE FALSE FALSE
## [2,]  TRUE  TRUE FALSE
## [3,] FALSE  TRUE  TRUE
## [4,]  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mat)</span></code></pre></div>
<pre><code>##  logi [1:4, 1:3] TRUE TRUE FALSE TRUE FALSE TRUE ...</code></pre>
<p>Elle pourrait être représentée comme suit : <img src="fig/Matrice.png" /></p>
<p>Comme pour un vecteur, tous ses éléments doivent être du même type.</p>
</div>
<div id="exemple-darray" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Exemple d’array</h3>
<p>Le dernier objet atomique est l’array, qui généralise le vecteur et la matrice à un nombre quelconque de dimensions. Voici un exemple d’array à 3 dimensions :</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>arr</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    2    3    6
## [2,]    4    1    3
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    9    6    8
## [2,]    2    3    0
## 
## , , 3
## 
##      [,1] [,2] [,3]
## [1,]    5    2    7
## [2,]    3    8    1
## 
## , , 4
## 
##      [,1] [,2] [,3]
## [1,]    2    5    8
## [2,]    6    3    5</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(arr)</span></code></pre></div>
<pre><code>##  num [1:2, 1:3, 1:4] 2 4 3 1 6 3 9 2 6 3 ...</code></pre>
<p>Il pourrait être représenté comme suit : <img src="fig/Array.png" /></p>
</div>
<div id="exemple-de-liste" class="section level3" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> Exemple de liste</h3>
<p>Une liste est pour sa part un objet récursif : elle contient d’autres objets, de types quelconques. Voici un exemple de liste :</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>liste</span></code></pre></div>
<pre><code>## [[1]]
##      [,1] [,2]
## [1,]    2    3
## [2,]    4    1
## 
## [[2]]
## [[2]][[1]]
## [1] 2 3
## 
## [[2]][[2]]
## [1] 8
## 
## 
## [[3]]
##   V1 V2
## 1  2  1
## 2  4  5
## 3  3  3</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(liste)</span></code></pre></div>
<pre><code>## List of 3
##  $ : num [1:2, 1:2] 2 4 3 1
##  $ :List of 2
##   ..$ : num [1:2] 2 3
##   ..$ : num 8
##  $ :&#39;data.frame&#39;:    3 obs. of  2 variables:
##   ..$ V1: num [1:3] 2 4 3
##   ..$ V2: num [1:3] 1 5 3</code></pre>
<p>Elle pourrait être représentée comme suit : <img src="fig/Liste.png" /></p>
<p>Les éléments d’une liste (séparés par une ligne pointillée dans la figure) ne sont pas de simples données comme dans un vecteur. Il s’agit d’autres objets. Dans cet exemple, la liste contient même une autre liste (deuxième élément).</p>
</div>
<div id="exemple-de-data-frame" class="section level3" number="1.1.5">
<h3><span class="header-section-number">1.1.5</span> Exemple de data frame</h3>
<p>Le data frame est en quelque sorte un type particulier de liste, mais il partage aussi des caractéristiques avec les matrices, étant réputé posséder 2 dimensions (des lignes et des colonnes). Ses éléments sont des objets contraints d’être de dimensions concordantes. Dans la grande majorité des cas, les éléments sont des vecteurs ou des facteurs de même longueur, formant les colonnes du data frame. Voici un exemple de data frame.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dat</span></code></pre></div>
<pre><code>##    V1         V2    V3
## 1 3.5      matin  TRUE
## 2 7.8 après-midi  TRUE
## 3 9.9       soir FALSE
## 4 5.7       nuit  TRUE</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4 obs. of  3 variables:
##  $ V1: num  3.5 7.8 9.9 5.7
##  $ V2: chr  &quot;matin&quot; &quot;après-midi&quot; &quot;soir&quot; &quot;nuit&quot;
##  $ V3: logi  TRUE TRUE FALSE TRUE</code></pre>
<p>Il pourrait être illustré comme suit : <img src="fig/DataFrame.png" /></p>
<p>La taille de la première dimension d’un data frame typique est la longueur commune des objets qu’il contient (4 dans l’exemple) et la taille de sa deuxième dimension est le nombre d’objets qu’il contient (dans l’exemple, le data frame contient 3 vecteurs).</p>
<p>Les data frames ont été créés spécialement pour l’analyse statistique de données. Ils représentent des tableaux de données dans lesquels les lignes sont des observations et les colonnes des variables (des variables au sens statistique et non au sens informatique). Le data frame fait donc penser à une matrice. Cependant, contrairement à une matrice, les données dans les différentes colonnes d’un data frame n’ont pas à être du même type.</p>
</div>
<div id="exemple-de-facteur" class="section level3" number="1.1.6">
<h3><span class="header-section-number">1.1.6</span> Exemple de facteur</h3>
<p>Un autre type d’objet propre à la statistique a été créé en R : le facteur. Ce type d’objet est utilisé pour stocker les valeurs observées d’une variable catégorique.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>fac</span></code></pre></div>
<pre><code>## [1] 5 2 5 5
## Levels: 2 5</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fac)</span></code></pre></div>
<pre><code>##  Factor w/ 2 levels &quot;2&quot;,&quot;5&quot;: 2 1 2 2</code></pre>
<p>Il s’agit d’une généralisation du vecteur.</p>
</div>
</div>
<div id="types-de-données" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Types de données</h2>
<p>Les éléments contenus dans les objets atomiques sont des données d’un des types suivants :</p>
<ul>
<li>réel,</li>
<li>entier,</li>
<li>caractère,</li>
<li>logique,</li>
<li>ainsi que quelques autres types qui ne seront pas utilisés dans le cours, tels que « complexe » et « brut ».</li>
</ul>
<p>Voici un exemple de chacun des types.</p>
<div id="données-réelles" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Données réelles</h3>
<p>Une donnée réelle est un nombre réel, par exemple</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>re <span class="ot">&lt;-</span> <span class="fl">5.8</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>re</span></code></pre></div>
<pre><code>## [1] 5.8</code></pre>
<p>Le terme informatique en anglais pour une donnée réelle est « double ».</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(re)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<p>Par contre, en R, la distinction entre les réels et les entiers est peu utilisée. R simplifie les choses et dit parfois d’une donnée réelle qu’il s’agit d’une donnée numérique.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(re)</span></code></pre></div>
<pre><code>##  num 5.8</code></pre>
</div>
<div id="données-entières" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Données entières</h3>
<p>Une donnée entière est un nombre entier (en anglais <em>integer</em>), donc sans partie décimale.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>en <span class="ot">&lt;-</span> 1L</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>en</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Dans cet exemple, le caractère <code>L</code> après le nombre indique à R que nous désirons qu’il le considère comme un entier.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(en)</span></code></pre></div>
<pre><code>##  int 1</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(en)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(en)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(en)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.double</span>(en)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Sans ce caractère <code>L</code>, la majorité des fonctions en R traite par défaut les nombres comme des réels.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>un <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>un</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(un)</span></code></pre></div>
<pre><code>##  num 1</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(un)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(un)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(un)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.double</span>(un)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="données-caractères" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Données caractères</h3>
<p>Une donnée caractère est une chaîne de caractères.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>ca <span class="ot">&lt;-</span> <span class="st">&quot;Hello world!&quot;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>ca</span></code></pre></div>
<pre><code>## [1] &quot;Hello world!&quot;</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ca)</span></code></pre></div>
<pre><code>##  chr &quot;Hello world!&quot;</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ca)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Ce sont les guillemets (simples ou doubles) qui indiquent à R qu’il s’agit d’une donnée de type caractère.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="st">&quot;1&quot;</span>)</span></code></pre></div>
<pre><code>##  chr &quot;1&quot;</code></pre>
</div>
<div id="données-logiques" class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Données logiques</h3>
<p>Une donnée logique est simplement <code>TRUE</code> ou <code>FALSE</code>.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>lo <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>lo</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(lo)</span></code></pre></div>
<pre><code>##  logi TRUE</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(lo)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<p>Attention : <code>"TRUE"</code> est une chaîne de caractères et non une donnée logique, à cause des guillemets bien sûr.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="st">&quot;TRUE&quot;</span>)</span></code></pre></div>
<pre><code>##  chr &quot;TRUE&quot;</code></pre>
</div>
<div id="données-manquantes" class="section level3" number="1.2.5">
<h3><span class="header-section-number">1.2.5</span> Données manquantes</h3>
<p>Peu importe le type de données, une donnée manquante est représentée en R par la constante <code>NA</code> (pour « Not Available »).</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Ce n’est pas la même chose que <code>NaN</code> qui signifie plutôt « Not a Number ».</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<p>L’existence d’une constante pour représenter les données manquantes est une autre particularité du langage R spécifique à l’analyse de données.</p>
</div>
</div>
<div id="obtention-dinformations-sur-les-objets" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Obtention d’informations sur les objets</h2>
<p>Pour avoir accès aux informations relatives à un objet, il existe une série de fonctions utiles, par exemple :</p>
<ul>
<li>type de l’objet : <code>is.</code>(<code>vector</code>/<code>matrix</code>/<code>array</code>/<code>list</code>/<code>data.frame</code>/<code>factor</code>/…);</li>
<li>attributs de l’objet : <code>attributes</code> (tous les attributs), <code>attr</code> (un seul attribut) et les fonctions raccourcies <code>names</code>, <code>dimnames</code>, <code>colnames</code>, <code>rownames</code>, <code>dim</code>, <code>nrow</code>, <code>ncol</code>, <code>class</code>, <code>levels</code>, etc.</li>
<li>type des éléments : <code>typeof</code>, <code>mode</code>, <code>is.</code>(<code>numeric</code>/<code>character</code>/<code>logical</code>/…);</li>
<li>nombre d’éléments : <code>length</code>.</li>
</ul>
<p>Ces fonctions seront illustrées plus loin.</p>
<p>Le tableau suivant résume ce que retournent les fonctions <code>typeof</code>, <code>mode</code> et <code>class</code> pour les différents types d’objets.</p>
<table>
<colgroup>
<col width="17%" />
<col width="22%" />
<col width="34%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th>type d’objet</th>
<th><code>typeof</code></th>
<th><code>mode</code></th>
<th><code>class</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>vecteur</td>
<td>type des données</td>
<td>type simplifié des données</td>
<td>comme <code>typeof</code></td>
</tr>
<tr class="even">
<td>matrice</td>
<td>type des données</td>
<td>type simplifié des données</td>
<td><code>"matrix" "array"</code></td>
</tr>
<tr class="odd">
<td>array</td>
<td>type des données</td>
<td>type simplifié des données</td>
<td><code>"array"</code></td>
</tr>
<tr class="even">
<td>liste</td>
<td><code>"list"</code></td>
<td><code>"list"</code></td>
<td><code>"list"</code></td>
</tr>
<tr class="odd">
<td>data frame</td>
<td><code>"list"</code></td>
<td><code>"list"</code></td>
<td><code>"data.frame"</code></td>
</tr>
<tr class="even">
<td>facteur</td>
<td><code>"integer"</code></td>
<td><code>"numeric"</code></td>
<td><code>"factor"</code></td>
</tr>
</tbody>
</table>
<p>Le type simplifié des données retourné par <code>mode</code> est explicité dans le tableau suivant, présentant ce que retournent les fonctions <code>typeof</code> et <code>mode</code> pour les différents types de données.</p>
<table style="width:69%;">
<colgroup>
<col width="25%" />
<col width="22%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th>type de données</th>
<th><code>typeof</code></th>
<th><code>mode</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>réelles</td>
<td><code>"double"</code></td>
<td><code>"numeric"</code></td>
</tr>
<tr class="even">
<td>entières</td>
<td><code>"integer"</code></td>
<td><code>"numeric"</code></td>
</tr>
<tr class="odd">
<td>caractères</td>
<td><code>"character"</code></td>
<td><code>"character"</code></td>
</tr>
<tr class="even">
<td>logiques</td>
<td><code>"logical"</code></td>
<td><code>"logical"</code></td>
</tr>
</tbody>
</table>
<p>Ainsi, <code>typeof</code> distingue les données réelles et entières, alors que <code>mode</code> les qualifie toutes de numériques. (Les tableaux précédents sont inspirés de <span class="citation">[<a href="#ref-stat545flavor" role="doc-biblioref">1</a>]</span>.)</p>
<div id="attributs-des-objets" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Attributs des objets</h3>
<p>Les structures de données R peuvent posséder des attributs, qui servent à contenir des informations supplémentaires concernant les données stockées dans l’objet. Ces informations supplémentaires sont parfois appelées métadonnées.</p>
<p>Par exemple, une matrice ou un array possède toujours un attribut portant le nom <code>dim</code> contenant les tailles de toutes les dimensions de l’objet.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(mat)</span></code></pre></div>
<pre><code>## $dim
## [1] 4 3</code></pre>
<p>Le fonction <code>attributes</code> retourne une liste contenant tous les attributs d’un objet, nommés. La fonction <code>attr</code> permet d’accéder à la valeur d’un attribut particulier, identifié par son nom.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(mat, <span class="st">&quot;dim&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 4 3</code></pre>
<p>Pour certains attributs communs, tels que <code>dim</code>, il existe même des fonctions spécifiques pour obtenir leur valeur. Par exemple :</p>
<ul>
<li><code>dim</code> retourne l’attribut <code>dim</code> d’un objet,</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mat)</span></code></pre></div>
<pre><code>## [1] 4 3</code></pre>
<ul>
<li><code>nrow</code> retourne la taille de la première dimension d’un objet,</li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mat)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<ul>
<li><code>ncol</code> retourne la taille de la deuxième dimension d’un objet,</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(mat)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Certains types d’objets, tels que le vecteur, ne possèdent pas d’attributs par défaut.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(vec)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>Il est cependant toujours possible d’ajouter des attributs à un objet, portant le nom de notre choix. Les fonctions qui retournent les valeurs d’attributs peuvent aussi servir à initialiser ou remplacer les valeurs des attributs. Pour ce faire, il suffit d’accompagner la commande d’extraction de l’attribut d’un opérateur d’assignation (<code>&lt;-</code>) suivi de la valeur souhaitée, comme dans l’exemple ci-dessus.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(vec, <span class="st">&quot;description&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;exemple de vecteur&quot;</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vec)</span></code></pre></div>
<pre><code>##  num [1:4] 3.5 7.8 9.9 5.7
##  - attr(*, &quot;description&quot;)= chr &quot;exemple de vecteur&quot;</code></pre>
<p>Pour retirer un attribut, il faut lui assigner la valeur spéciale <code>NULL</code>.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(vec, <span class="st">&quot;description&quot;</span>) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vec)</span></code></pre></div>
<pre><code>##  num [1:4] 3.5 7.8 9.9 5.7</code></pre>
<p> </p>
<p style="font-size:110%">
<strong>Vue d’ensemble des attributs possédés par un objet selon son type</strong>
</p>
<table>
<thead>
<tr class="header">
<th>Type d’objet</th>
<th><code>names</code></th>
<th><code>dimnames</code></th>
<th><code>dim</code></th>
<th><code>class</code></th>
<th><code>levels</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>vecteur</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td>-</td>
<td>-</td>
<td><span class="math inline">\(\bullet\)</span></td>
<td>-</td>
</tr>
<tr class="even">
<td>matrice ou array</td>
<td>-</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td><span class="math inline">\(\checkmark\)</span></td>
<td><span class="math inline">\(\bullet\)</span></td>
<td>-</td>
</tr>
<tr class="odd">
<td>liste</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td>-</td>
<td>-</td>
<td><span class="math inline">\(\bullet\)</span></td>
<td>-</td>
</tr>
<tr class="even">
<td>data frame</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td>(<span class="math inline">\(\checkmark\)</span>, <span class="math inline">\(\bullet\)</span>)</td>
<td><span class="math inline">\(\bullet\)</span></td>
<td><span class="math inline">\(\checkmark\)</span></td>
<td>-</td>
</tr>
<tr class="odd">
<td>facteur</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td>-</td>
<td>-</td>
<td><span class="math inline">\(\checkmark\)</span></td>
<td><span class="math inline">\(\checkmark\)</span></td>
</tr>
</tbody>
</table>
<p>Légende :<br />
« - » = attribut non existant pour ce type d’objet<br />
« <span class="math inline">\(\checkmark\)</span> » = attribut existe (non obligatoire si encadré de parenthèses)<br />
« <span class="math inline">\(\bullet\)</span> » = métadonnée existante, mais pas dans les attributs obtenus avec la fonction <code>attributes</code></p>
</div>
</div>
<div id="extraction" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Extraction d’éléments</h2>
<p>L’extraction d’éléments dans un jeu de données est une opération très usuelle au cours d’une analyse de données. Par exemple, il arrive souvent de vouloir faire un certain calcul seulement sur une partie des données plutôt que sur le jeu de données entier. Il faut alors prélever les données concernées.</p>
<div id="opérateurs-dindiçage" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Opérateurs d’indiçage</h3>
<p>Il y a trois opérateurs d’indiçage d’éléments d’un objet R : <code>[</code>, <code>[[</code> et <code>$</code>. Ces opérateurs permettent d’extraire des éléments s’ils sont utilisés seuls, et ils permettent de remplacer des éléments s’ils sont utilisés en combinaison avec une assignation.</p>
<div id="versus-et" class="section level4" number="1.4.1.1">
<h4><span class="header-section-number">1.4.1.1</span> <code>[</code> versus <code>[[</code> et <code>$</code></h4>
<p></p>
<p>L’opérateur <code>[</code> effectue de l’extraction <strong>d’éléments</strong> (potentiellement plus d’un) en <strong>préservant presque toujours la structure</strong> de l’objet (l’objet produit en résultat de l’extraction est, sauf exception, du même type que l’objet d’origine et conserve la majorité de ses attributs).</p>
<p>Les opérateurs <code>[[</code> et <code>$</code> permettent de référer à <strong>un seul élément</strong> et ils <strong>simplifient l’objet</strong> lors d’une extraction (retirent des attributs pour les objets atomiques et sortent de l’objet principal pour un objet récursif).</p>
<p>Voici des exemples.</p>
<ul>
<li>extraction de deux éléments d’un objet atomique avec <code>[</code></li>
</ul>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 3.5 7.8 9.9 5.7</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span></code></pre></div>
<pre><code>## [1] 7.8 5.7</code></pre>
<p>Dans cet exemple, la fonction <code>c</code> sert à créer un vecteur contenant les positions des éléments à extraire.</p>
<p> </p>
<ul>
<li>extraction d’un élément d’un objet récursif avec <code>[</code>, en préservant la structure de l’objet d’origine</li>
</ul>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(liste)</span></code></pre></div>
<pre><code>## List of 3
##  $ : num [1:2, 1:2] 2 4 3 1
##  $ :List of 2
##   ..$ : num [1:2] 2 3
##   ..$ : num 8
##  $ :&#39;data.frame&#39;:    3 obs. of  2 variables:
##   ..$ V1: num [1:3] 2 4 3
##   ..$ V2: num [1:3] 1 5 3</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>extrait_1_liste <span class="ot">&lt;-</span> liste[<span class="dv">1</span>]</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(extrait_1_liste)</span></code></pre></div>
<pre><code>## List of 1
##  $ : num [1:2, 1:2] 2 4 3 1</code></pre>
<p>Ici, le résultat est encore une liste, mais contenant un seul élément.</p>
<p> </p>
<ul>
<li>extraction d’un élément d’un objet récursif avec <code>[[</code>, avec perte de la structure de l’objet d’origine</li>
</ul>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>extrait_2_liste <span class="ot">&lt;-</span> liste[[<span class="dv">1</span>]]</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(extrait_2_liste)</span></code></pre></div>
<pre><code>##  num [1:2, 1:2] 2 4 3 1</code></pre>
<p>Ici, le résultat est un vecteur, celui qui était stocké en position 1 dans l’objet <code>liste</code>.</p>
<p> </p>
<ul>
<li>extraction d’un élément d’un objet atomique avec perte d’un attribut</li>
</ul>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>mat</span></code></pre></div>
<pre><code>##       [,1]  [,2]  [,3]
## [1,]  TRUE FALSE FALSE
## [2,]  TRUE  TRUE FALSE
## [3,] FALSE  TRUE  TRUE
## [4,]  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(mat)</span></code></pre></div>
<pre><code>## $dim
## [1] 4 3</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>extrait_mat <span class="ot">&lt;-</span> mat[[<span class="dv">1</span>, <span class="dv">3</span>]]</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>extrait_mat</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(extrait_mat)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p> </p>
</div>
<div id="extractions-déléments-dans-un-objet-à-plusieurs-dimensions" class="section level4" number="1.4.1.2">
<h4><span class="header-section-number">1.4.1.2</span> Extractions d’éléments dans un objet à plusieurs dimensions</h4>
<p></p>
<p>Les opérateurs <code>[</code> et <code>[[</code> prennent en entrée un argument pour chacune des dimensions d’un objet, comme illustré dans l’exemple précédent. Voici un autre exemple, avec l’array à 3 dimensions <code>arr</code>. La commande suivante extrait un seul élément de <code>arr</code>, dont la position est identifiée par les valeurs fournies en entrée aux arguments de <code>[</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>arr[<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
<div id="spécificité-de-lopérateur" class="section level4" number="1.4.1.3">
<h4><span class="header-section-number">1.4.1.3</span> Spécificité de l’opérateur <code>$</code></h4>
<p></p>
<p>L’opérateur <code>$</code> fonctionne seulement avec les objets récursifs (une liste ou un data frame) dont les éléments sont nommés. Il doit être suivi du nom de l’élément à extraire. Ce nom n’a pas besoin d’être encadré de guillemets s’il ne contient pas d’espaces.</p>
<p>Prenons par exemple le data frame <code>dat</code> observé précédemment. Nous ne l’avions peut-être pas remarqué, mais les éléments de <code>dat</code> sont nommés.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4 obs. of  3 variables:
##  $ V1: num  3.5 7.8 9.9 5.7
##  $ V2: chr  &quot;matin&quot; &quot;après-midi&quot; &quot;soir&quot; &quot;nuit&quot;
##  $ V3: logi  TRUE TRUE FALSE TRUE</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(dat, <span class="st">&quot;names&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;V1&quot; &quot;V2&quot; &quot;V3&quot;</code></pre>
<p>Alors il est possible d’extraire disons la deuxième colonne du data frame par la commande suivante.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>V2</span></code></pre></div>
<pre><code>## [1] &quot;matin&quot;      &quot;après-midi&quot; &quot;soir&quot;       &quot;nuit&quot;</code></pre>
</div>
<div id="identification-de-lélément-à-extraire-avec-lopérateur" class="section level4" number="1.4.1.4">
<h4><span class="header-section-number">1.4.1.4</span> Identification de l’élément à extraire avec l’opérateur <code>[[</code></h4>
<p></p>
<p>Les arguments fournis à <code>[[</code> pour identifier l’unique élément à extraire peuvent recevoir des valeurs de type :</p>
<ul>
<li>numérique : un nombre spécifiant la position de l’élément selon la dimension, ou</li>
<li>caractère (dans le cas d’éléments nommés) : le nom de l’élément selon la dimension.</li>
</ul>
<p>Par exemple, le 2<sup>ième</sup> élément de la colonne nommée <code>"V2"</code> du data frame <code>dat</code> peut être extrait ainsi.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>dat[[<span class="dv">2</span>, <span class="st">&quot;V2&quot;</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;après-midi&quot;</code></pre>
<p>Si une valeur numérique non entière est fournie en argument, elle est tronquée vers 0, comme dans cet exemple.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 3.5 7.8 9.9 5.7</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>vec[[<span class="fl">2.6</span>]]</span></code></pre></div>
<pre><code>## [1] 7.8</code></pre>
</div>
<div id="identification-du-ou-des-éléments-à-extraire-avec-lopérateur" class="section level4" number="1.4.1.5">
<h4><span class="header-section-number">1.4.1.5</span> Identification du ou des éléments à extraire avec l’opérateur <code>[</code></h4>
<p></p>
<p>Étant donné que l’opérateur <code>[</code> permet l’extraction de plusieurs éléments, il accepte une plus grande variété de types de valeurs. Voici les valeurs qu’il accepte en argument pour identifier les éléments à extraire :</p>
<ul>
<li>un ou des nombres positifs, dont les valeurs sont entre 1 et la taille de la dimension concernée :<br />
<em>positions des éléments à sélectionner</em>;</li>
<li>un ou des nombres négatifs, dont les valeurs sont entre 1 et la taille de la dimension concernée :<br />
<em>-1 <span class="math inline">\(\times\)</span> positions des éléments à exclure</em>;</li>
<li>une ou des chaînes de caractères (possible seulement si les éléments sont nommés) :<br />
<em>noms des éléments à sélectionner</em>;</li>
<li>vecteur de logiques (doit être de la même longueur que la dimension concernée) :<br />
<code>TRUE</code> <em>pour les éléments à sélectionner,</em> <code>FALSE</code> <em>pour ceux à exclure</em>;</li>
<li>rien : utile par exemple pour extraire tous les éléments selon une dimension d’un objet à plusieurs dimensions.</li>
</ul>
<p>Voici quelques exemples :</p>
<ul>
<li>extraction d’éléments identifiés par leur position,</li>
</ul>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## [1] 3.5 9.9</code></pre>
<ul>
<li>extraction d’éléments par identification d’éléments à exclure,</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span></code></pre></div>
<pre><code>## [1] 3.5 9.9</code></pre>
<ul>
<li>extraction d’éléments identifiés par leurs noms,</li>
</ul>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="fu">c</span>(<span class="st">&quot;V1&quot;</span>, <span class="st">&quot;V2&quot;</span>)]</span></code></pre></div>
<pre><code>##    V1         V2
## 1 3.5      matin
## 2 7.8 après-midi
## 3 9.9       soir
## 4 5.7       nuit</code></pre>
<ul>
<li>extraction d’éléments identifiés par un vecteur logique,</li>
</ul>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)]</span></code></pre></div>
<pre><code>## [1] 3.5 9.9</code></pre>
<ul>
<li>extraction de tous les éléments selon une des dimensions.</li>
</ul>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>##    V1         V2   V3
## 2 7.8 après-midi TRUE</code></pre>
<p> </p>
<p>Lors de l’indiçage à l’aide de valeurs numériques positives ou de chaînes de caractères, les valeurs peuvent se répéter. Dans ce cas, les éléments sont extraits autant de fois que la fréquence de leur identifiant, comme dans ces exemples.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## [1] 3.5 3.5 3.5 7.8 7.8 9.9 9.9 9.9 9.9</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>dat[, <span class="fu">c</span>(<span class="st">&quot;V2&quot;</span>, <span class="st">&quot;V2&quot;</span>)]</span></code></pre></div>
<pre><code>##           V2       V2.1
## 1      matin      matin
## 2 après-midi après-midi
## 3       soir       soir
## 4       nuit       nuit</code></pre>
<p>Les sections suivantes proposent plusieurs autres exemples d’extraction de données.</p>
</div>
<div id="argument-drop-de-lopérateur" class="section level4" number="1.4.1.6">
<h4><span class="header-section-number">1.4.1.6</span> Argument <code>drop</code> de l’opérateur <code>[</code></h4>
<p></p>
<p>L’opérateur <code>[</code> préserve la structure des objets, sauf dans quelques cas particuliers.
Un de ces cas est l’extraction d’une colonne, complète ou partielle, d’un data frame. Le résultat de l’extraction est alors un vecteur ou un facteur, et non un autre data frame, comme dans cet exemple.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4 obs. of  3 variables:
##  $ V1: num  3.5 7.8 9.9 5.7
##  $ V2: chr  &quot;matin&quot; &quot;après-midi&quot; &quot;soir&quot; &quot;nuit&quot;
##  $ V3: logi  TRUE TRUE FALSE TRUE</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="dv">2</span>])</span></code></pre></div>
<pre><code>##  chr [1:2] &quot;matin&quot; &quot;soir&quot;</code></pre>
<p>Il n’a pas ce comportement lors de l’extraction d’une ligne d’un data frame, car les éléments sur une même ligne ne sont pas nécessairement du même type.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat[<span class="dv">2</span>, ])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    1 obs. of  3 variables:
##  $ V1: num 7.8
##  $ V2: chr &quot;après-midi&quot;
##  $ V3: logi TRUE</code></pre>
<p>Cependant, avec les objets atomiques, l’opérateur <code>[</code> cherche toujours par défaut à réduire le plus possible le nombre de dimensions de l’objet retourné. Ainsi, l’extraction suivante retourne un vecteur, alors que l’objet d’origine est un array à trois dimensions.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(arr[, <span class="dv">2</span>, <span class="dv">4</span>])</span></code></pre></div>
<pre><code>##  num [1:2] 5 3</code></pre>
<p>Il est possible de contrôler ce comportement grâce à l’argument <code>drop</code>. Donner la valeur <code>FALSE</code> à cet argument empêche <code>[</code> de réduire le nombre de dimensions du résultat retourné. Ainsi, la commande suivante retourne un array,</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(arr[, <span class="dv">2</span>, <span class="dv">4</span>, <span class="at">drop =</span> <span class="cn">FALSE</span>])</span></code></pre></div>
<pre><code>##  num [1:2, 1, 1] 5 3</code></pre>
<p>et la suivante un data frame.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="dv">2</span>, <span class="at">drop =</span> <span class="cn">FALSE</span>])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    2 obs. of  1 variable:
##  $ V2: chr  &quot;matin&quot; &quot;soir&quot;</code></pre>
</div>
</div>
<div id="fonctions-dextraction" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Fonctions d’extraction</h3>
<p>En plus des opérateurs d’indiçage, certaines fonctions permettent aussi d’extraire des éléments, notamment les fonctions <code>head</code>, <code>tail</code> et <code>subset</code>.</p>
<div id="fonction-head" class="section level4" number="1.4.2.1">
<h4><span class="header-section-number">1.4.2.1</span> Fonction <code>head</code></h4>
<p></p>
<p>La fonction <code>head</code> extrait les premiers éléments d’un vecteur, d’une liste ou d’un facteur et les premières lignes d’une matrice ou d’un data frame. L’argument <code>n</code> permet de spécifier combien d’éléments ou de lignes extraire. Voici un exemple.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vec, <span class="at">n =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3.5 7.8</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##    V1         V2    V3
## 1 3.5      matin  TRUE
## 2 7.8 après-midi  TRUE
## 3 9.9       soir FALSE</code></pre>
</div>
<div id="fonction-tail" class="section level4" number="1.4.2.2">
<h4><span class="header-section-number">1.4.2.2</span> Fonction <code>tail</code></h4>
<p></p>
<p>À l’inverse, la fonction <code>tail</code> extrait les derniers éléments ou les dernières lignes.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(vec, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 7.8 9.9 5.7</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(dat, <span class="at">n =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##    V1   V2   V3
## 4 5.7 nuit TRUE</code></pre>
</div>
<div id="fonction-subset" class="section level4" number="1.4.2.3">
<h4><span class="header-section-number">1.4.2.3</span> Fonction <code>subset</code></h4>
<p></p>
<p>La fonction <code>subset</code> est quant à elle une option de rechange à l’opérateur <code>[</code> utilisé avec des identifiants logiques. Elle fonctionne avec les vecteurs.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(vec, <span class="at">subset =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## [1] 7.8 9.9 5.7</code></pre>
<p>Cependant, elle est surtout utile avec des matrices et des data frames. Avec un objet à deux dimensions, l’argument <code>subset</code> de la fonction du même nom sert à identifier les lignes à extraire et l’argument <code>select</code> à identifier les colonnes.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(mat, <span class="at">subset =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>), <span class="at">select =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##      [,1]
## [1,] TRUE
## [2,] TRUE</code></pre>
<p>Lorsque le premier argument fourni en entrée à la fonction <code>subset</code> est un data frame, il est possible de référer aux colonnes de celui-ci directement par leurs noms dans les arguments <code>subset</code> et <code>select</code>. Il est aussi possible de retirer une colonne en utilisant l’opérateur <code>-</code> avant le nom de la colonne à retirer dans la valeur fournie à l’argument <code>select</code>.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(dat, <span class="at">subset =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>), <span class="at">select =</span> <span class="sc">-</span>V3)</span></code></pre></div>
<pre><code>##    V1    V2
## 1 3.5 matin
## 4 5.7  nuit</code></pre>
<p><strong>Note</strong> : Typiquement, le vecteur de <code>TRUE</code> et <code>FALSE</code> servant à identifier les lignes à sélectionner est créé par une condition logique, comme dans l’exemple suivant.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(dat, <span class="at">subset =</span> V1 <span class="sc">&lt;</span> <span class="dv">6</span>, <span class="at">select =</span> <span class="sc">-</span>V3)</span></code></pre></div>
<pre><code>##    V1    V2
## 1 3.5 matin
## 4 5.7  nuit</code></pre>
<p>Nous verrons plus tard comment utiliser des opérateurs logiques pour créer des vecteurs d’identifiants logiques. Avec ces opérateurs, il sera facile d’extraire par exemple toutes les valeurs tombant dans un certain ensemble de valeurs acceptées.</p>
</div>
</div>
</div>
<div id="remplacement" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Remplacement d’éléments</h2>
<p>En combinant une extraction à un opérateur d’assignation (<code>&lt;-</code>) suivi de nouvelles valeurs, des éléments d’un objet peuvent être remplacés. Voici un exemple.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 3.5 7.8 9.9 5.7</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fl">6.1</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 3.5 7.8 6.1 5.7</code></pre>
<p>Il est tout à fait possible de remplacer plus d’un élément à la fois, comme dans l’exemple suivant.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>dat</span></code></pre></div>
<pre><code>##    V1         V2    V3
## 1 3.5      matin  TRUE
## 2 7.8 après-midi  TRUE
## 3 9.9       soir FALSE
## 4 5.7       nuit  TRUE</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">FALSE</span>)</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>dat</span></code></pre></div>
<pre><code>##    V1         V2    V3
## 1 3.5      matin    NA
## 2 7.8 après-midi FALSE
## 3 9.9       soir FALSE
## 4 5.7       nuit  TRUE</code></pre>
<p>Il est parfois utile d’exploiter la <strong>règle de recyclage</strong> lors du remplacement d’éléments dans un objet R. Cette règle permet des opérations sur des vecteurs qui ne sont pas de même longueur. Les éléments du vecteur le plus court sont répétés de façon à ce que ce vecteur devienne de la même longueur que le vecteur le plus long.</p>
<p>Par exemple, si une seule valeur de remplacement est fournie, mais que plusieurs éléments sont identifiés, alors ceux-ci seront tous remplacés par l’unique valeur fournie.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 0.5 0.5 0.5 5.7</code></pre>
<p>Cela fonctionne aussi lorsque le vecteur le plus court est de longueur supérieure à 1. Dans l’exemple suivant, 4 valeurs sont identifiées à remplacer, mais 2 valeurs de remplacement sont fournies. Le vecteur de valeurs de remplacement est donc dupliqué.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>)</span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 0.1 0.2 0.1 0.2</code></pre>
<p>Si la longueur du vecteur le plus long n’est pas un multiple de la longueur du vecteur le plus court, ça fonctionne encore, mais un avertissement est émis, comme dans cet exemple.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">2.0</span>, <span class="fl">4.9</span>)</span></code></pre></div>
<pre><code>## Warning in vec[1:3] &lt;- c(2, 4.9): number of items to replace is not a multiple of
## replacement length</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 2.0 4.9 2.0 0.2</code></pre>
<p>Mentionnons que la fonction <code>edit</code> permet également de modifier des éléments dans une matrice ou un data frame à l’intérieur d’un chiffrier ouvert dans une fenêtre externe.
Aussi, la fonction <code>replace</code> permet de remplacer des éléments dans un vecteur. Ces fonctions ne sont pas illustrées ici.</p>
<hr />
</div>
</div>
<div id="vecteurs" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Vecteurs</h1>
<p>Un vecteur est un simple objet atomique à une dimension. Toutes les données qu’il contient doivent être du même type.</p>
<div id="obtention-dinformations" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Obtention d’informations</h2>
<p>Observons le vecteur <code>vec</code> illustré précédemment en utilisant des fonctions déjà vues jusqu’à maintenant.</p>
<p>Il est possible d’afficher les données que <code>vec</code> contient,</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 2.0 4.9 2.0 0.2</code></pre>
<p>ou encore un résumé de ces données avec la fonction <code>summary</code>.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vec)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.200   1.550   2.000   2.275   2.725   4.900</code></pre>
<p>Des informations sur la structure de l’objet sont affichées avec la fonction <code>str</code>.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vec)</span></code></pre></div>
<pre><code>##  num [1:4] 2 4.9 2 0.2</code></pre>
<p>L’objet possède une certaine longueur, retournée par la fonction <code>length</code>.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(vec)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Son contenu est d’un certain type, retourné par la fonction <code>typeof</code>.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(vec)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
</div>
<div id="création" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Création</h2>
<div id="fonction-c" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Fonction <code>c</code></h3>
<p>La fonction <code>c</code> permet de créer un objet de type vecteur comme suit.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>de <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">4</span>)</span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>de</span></code></pre></div>
<pre><code>##  [1] 2 3 4 1 2 3 5 6 5 4</code></pre>
<p>La lettre <code>c</code> a été choisie comme nom pour cette fonction, car celle-ci sert à <em>combiner</em> (an anglais <em>combine</em>) ou concaténer des éléments dans un vecteur.</p>
<p>Bien que les nombres dans ce vecteur soient des entiers, ils ont été stockés sous le format réel. C’est ce que fait par défaut la fonction <code>c</code>.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(de)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
</div>
<div id="fonction-vector" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Fonction <code>vector</code></h3>
<p>Une autre fonction permet de créer des vecteurs : la fonction <code>vector</code>. Elle initialise des vecteurs, qui sont remplis par la suite. Avec <code>vector</code>, il faut identifier la longueur du vecteur créé et le type des données qu’il doit contenir, comme dans cet exemple.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> <span class="dv">3</span>)</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 0 0 0</code></pre>
<p>L’utilisateur ne contrôle pas les données initiales placées dans un vecteur créé avec <code>vector</code>. Il doit plutôt les modifier a posteriori.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>ve[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 5 0 0</code></pre>
<p>Cette fonction sera utile pour initialiser des vecteurs servant à contenir des valeurs créées itérativement dans une boucle.</p>
</div>
<div id="fonction-as.vector" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Fonction <code>as.vector</code></h3>
<p>La fonction <code>as.vector</code> sert quant à elle à transformer un objet en vecteur. Tous les attributs de l’objet sont retirés lors de l’opération. Voici un exemple.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.vector</span>(mat)</span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE</code></pre>
</div>
<div id="fonction-rep" class="section level3" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Fonction <code>rep</code></h3>
<p>Si un vecteur doit contenir des données qui se répètent, la fonction <code>rep</code> est utile. Ainsi, plutôt que de créer, par exemple, un vecteur contenant cinq 1 suivis de cinq 2 avec la fonction <code>c</code> comme suit</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2</code></pre>
<p>il est plus succinct de le créer en utilisant conjointement les fonctions <code>rep</code> et <code>c</code> comme suit</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">each =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2</code></pre>
<p>L’utilisation de l’argument <code>each</code> de <code>rep</code> produit des répétitions consécutives élément par élément. Si la fonction <code>rep</code> est appelée sans attribuer explicitement les valeurs fournies en entrée à des arguments, alors la deuxième valeur fournie sera assignée à l’argument <code>times</code> et non <code>each</code>. Dans ce cas, un unique entier positif fourni en deuxième position provoque la répétition du vecteur entier fourni en première position un certain nombre de fois, comme dans cet exemple.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##  [1] 1 2 1 2 1 2 1 2 1 2</code></pre>
<p>Le nombre de répétitions pourrait aussi varier d’un élément à l’autre en fournissant à l’argument <code>times</code> un vecteur de nombre de répétitions aussi long que le vecteur fourni comme premier argument.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">times =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] 1 1 1 1 2 2 2</code></pre>
<p>Il est même possible d’exploiter simultanément les arguments <code>each</code> et <code>times</code>.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">each =</span> <span class="dv">3</span>, <span class="at">times =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 2 2 2 1 1 1 2 2 2</code></pre>
</div>
<div id="création-de-séquences-avec-ou-seq" class="section level3" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Création de séquences avec <code>:</code> ou <code>seq</code></h3>
<p>Pour créer un vecteur contenant une séquence régulière de nombres, l’opérateur <code>:</code> ou la fonction <code>seq</code> sont très utiles.</p>
<p>Avec l’opérateur <code>:</code>, les séquences créées comportent des nombres séparés par des bonds de 1, par exemple</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span><span class="sc">:-</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1]  6  5  4  3  2  1  0 -1 -2</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.2</span><span class="sc">:</span><span class="fl">4.2</span></span></code></pre></div>
<pre><code>## [1] 0.2 1.2 2.2 3.2 4.2</code></pre>
<p>Le nombre placé devant l’opérateur indique le début de la séquence et le nombre placé après indique la fin.</p>
<p>La fonction <code>seq</code> généralise <code>:</code> en permettant des bonds de longueur autre que 1. Voici des exemples.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">9</span>, <span class="at">by =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 0 3 6 9</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">9</span>, <span class="at">length.out =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 0 3 6 9</code></pre>
</div>
<div id="vecteur-de-longueur-1" class="section level3" number="2.2.6">
<h3><span class="header-section-number">2.2.6</span> Vecteur de longueur 1</h3>
<p>Si un objet R est créé en lui assignant une seule donnée, cet objet est considéré comme un vecteur de longueur 1.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>une_donnee <span class="ot">&lt;-</span> <span class="st">&quot;a&quot;</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(une_donnee)</span></code></pre></div>
<pre><code>##  chr &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.vector</span>(une_donnee)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(une_donnee)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Ainsi, l’appel à la fonction <code>c</code> n’est pas nécessaire pour créer un vecteur contenant un seul élément.</p>
</div>
</div>
<div id="concaténation-de-vecteurs" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Concaténation de vecteurs</h2>
<div id="fonction-c-1" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Fonction <code>c</code></h3>
<p>En plus de servir à créer de nouveaux vecteurs, <code>c</code> permet de concaténer des vecteurs (autant que souhaité), comme dans cet exemple.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(de, ve, <span class="dv">6</span><span class="sc">:-</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  2  3  4  1  2  3  5  6  5  4  5  0  0  6  5  4  3  2  1  0 -1 -2</code></pre>
</div>
<div id="fonction-append" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Fonction <code>append</code></h3>
<p>La fonction <code>append</code> fait aussi de la concaténation de vecteurs. Contrairement à <code>c</code>, elle est limitée à la fusion de deux vecteurs. Cependant, elle permet d’insérer le deuxième vecteur n’importe où dans le premier vecteur, pas nécessairement à la fin. Voici un exemple.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">append</span>(de, ve, <span class="at">after =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##  [1] 2 3 4 5 0 0 1 2 3 5 6 5 4</code></pre>
</div>
</div>
<div id="métadonnées" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Métadonnées</h2>
<p>Supposons que l’objet <code>de</code> contienne les résultats de 10 lancers d’un dé : 2, 3, 4, 1, 2, 3, 5, 6, 5, 4. Dans cet objet, nous pourrions identifier à quel lancer chaque résultat fait référence en ajoutant des noms aux éléments du vecteur.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(de) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;l1&quot;</span>, <span class="st">&quot;l2&quot;</span>, <span class="st">&quot;l3&quot;</span>, <span class="st">&quot;l4&quot;</span>, <span class="st">&quot;l5&quot;</span>, <span class="st">&quot;l6&quot;</span>, <span class="st">&quot;l7&quot;</span>, <span class="st">&quot;l8&quot;</span>, <span class="st">&quot;l9&quot;</span>, <span class="st">&quot;l10&quot;</span>)</span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="co"># nous apprendrons bientôt à créer plus succinctement ce vecteur avec l&#39;instruction</span></span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a><span class="co"># paste0(&quot;l&quot;, 1:10)</span></span></code></pre></div>
<p>Voyons de quoi a l’air l’objet <code>de</code> suite à cet ajout.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>de</span></code></pre></div>
<pre><code>##  l1  l2  l3  l4  l5  l6  l7  l8  l9 l10 
##   2   3   4   1   2   3   5   6   5   4</code></pre>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(de)</span></code></pre></div>
<pre><code>##  Named num [1:10] 2 3 4 1 2 3 5 6 5 4
##  - attr(*, &quot;names&quot;)= chr [1:10] &quot;l1&quot; &quot;l2&quot; &quot;l3&quot; &quot;l4&quot; ...</code></pre>
<p>Il possède maintenant un attribut nommé <code>"names"</code>.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(de, <span class="at">which =</span> <span class="st">&quot;names&quot;</span>)</span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ou</span></span></code></pre></div>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(de)</span></code></pre></div>
<pre><code>##  [1] &quot;l1&quot;  &quot;l2&quot;  &quot;l3&quot;  &quot;l4&quot;  &quot;l5&quot;  &quot;l6&quot;  &quot;l7&quot;  &quot;l8&quot;  &quot;l9&quot;  &quot;l10&quot;</code></pre>
<p>Cet attribut est un exemple de métadonnées. Il s’agit de données à propos des données.</p>
<p> </p>
<p>Nous avons déjà vu que tout attribut peut être retiré en lui assignant la valeur spéciale <code>NULL</code>. Pour retirer les noms que nous venons d’ajouter, nous pourrions donc faire comme ceci.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(de) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a>de</span></code></pre></div>
<pre><code>##  [1] 2 3 4 1 2 3 5 6 5 4</code></pre>
<p>Pour la tâche spécifique d’effacer l’attribut <code>"names"</code> ou <code>"dimnames"</code>, une autre façon de précéder est d’appeler la fonction <code>unname</code> comme suit.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>de <span class="ot">&lt;-</span> <span class="fu">unname</span>(de)</span></code></pre></div>
<p>Dans le cas d’un vecteur, il est également possible d’effacer d’un coup tous les attributs avec <code>as.vector</code> comme suit.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>de <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(de)</span></code></pre></div>
<p>Redonnons maintenant des noms aux éléments de <code>de</code>, car ils seront utiles dans les prochains exemples.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(de) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;l1&quot;</span>, <span class="st">&quot;l2&quot;</span>, <span class="st">&quot;l3&quot;</span>, <span class="st">&quot;l4&quot;</span>, <span class="st">&quot;l5&quot;</span>, <span class="st">&quot;l6&quot;</span>, <span class="st">&quot;l7&quot;</span>, <span class="st">&quot;l8&quot;</span>, <span class="st">&quot;l9&quot;</span>, <span class="st">&quot;l10&quot;</span>)</span></code></pre></div>
</div>
<div id="extraction-déléments" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Extraction d’éléments</h2>
<div id="un-seul-élément" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Un seul élément</h3>
<p>Un élément d’un vecteur peut être extrait en l’identifiant par sa position comme suit.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a>de[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## l1 
##  2</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>de[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Remarquons que l’opérateur <code>[</code> préserve le nom de l’élément (l’attribut <code>names</code>), alors que l’opérateur <code>[[</code> ne le conserve pas, ce qui concorde avec les propriétés de ces opérateurs vues précédemment.</p>
<p>Un élément peut aussi être extrait en l’identifiant par son nom.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>de[<span class="st">&quot;l1&quot;</span>]   </span></code></pre></div>
<pre><code>## l1 
##  2</code></pre>
<p>Mais l’opérateur d’extraction <code>$</code> ne fonctionne pas avec un objet atomique tel qu’un vecteur.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a>de<span class="sc">$</span>l1</span></code></pre></div>
<pre><code>## Error in de$l1: $ operator is invalid for atomic vectors</code></pre>
</div>
<div id="plusieurs-éléments" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Plusieurs éléments</h3>
<p>Pour extraire plusieurs éléments simultanément, il faut utiliser un autre vecteur afin d’identifier les éléments à extraire. Voici quelques exemples selon le type du vecteur d’identifiants.</p>
<div id="identifiants-numériques" class="section level4" number="2.5.2.1">
<h4><span class="header-section-number">2.5.2.1</span> Identifiants numériques</h4>
<p></p>
<p>Dans cet exemple, les éléments à extraire sont identifiés par des nombres représentant leurs positions.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a>posObs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a>de[posObs]</span>
<span id="cb250-3"><a href="#cb250-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ou directement</span></span></code></pre></div>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>de[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">7</span>)]</span></code></pre></div>
<pre><code>## l3 l6 l7 
##  4  3  5</code></pre>
<p>Note : L’opérateur [[ sert à extraire uniquement un élément. Donc la commande suivante ne fonctionne pas.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a>de[[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">7</span>)]] </span></code></pre></div>
<pre><code>## Error in de[[c(3, 6, 7)]]: attempt to select more than one element in vectorIndex</code></pre>
<p> </p>
<p>Exemples de moyens rapides de créer des vecteurs de positions avec l’opérateur <code>:</code> et la fonction <code>seq</code> :</p>
<ul>
<li>extraction des 5 premières observations (équivalent à <code>head(de, n = 5)</code>) :</li>
</ul>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a>de[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## l1 l2 l3 l4 l5 
##  2  3  4  1  2</code></pre>
<ul>
<li>extraction des observations en positions paires.</li>
</ul>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a>de[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">2</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)]</span></code></pre></div>
<pre><code>##  l2  l4  l6  l8 l10 
##   3   1   3   6   4</code></pre>
</div>
<div id="identifiants-caractères" class="section level4" number="2.5.2.2">
<h4><span class="header-section-number">2.5.2.2</span> Identifiants caractères</h4>
<p></p>
<p>Dans cet exemple, des chaînes de caractères contenant les noms des éléments à extraire sont utilisées.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a>de[<span class="fu">c</span>(<span class="st">&quot;l3&quot;</span>,<span class="st">&quot;l6&quot;</span>,<span class="st">&quot;l7&quot;</span>)]</span></code></pre></div>
<pre><code>## l3 l6 l7 
##  4  3  5</code></pre>
</div>
<div id="identifiants-logiques" class="section level4" number="2.5.2.3">
<h4><span class="header-section-number">2.5.2.3</span> Identifiants logiques</h4>
<p></p>
<p>Voici un exemple de vecteur logique permettant d’identifier des éléments à extraire. Ce vecteur servira à extraire des éléments du vecteur <code>de</code>. Il doit donc être de longueur 10, tout comme <code>de</code>. Le vecteur contient la valeur <code>TRUE</code> aux positions des éléments à extraire et <code>FALSE</code> aux positions des éléments à exclure.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a>index.logic <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="fu">rep</span>(<span class="cn">FALSE</span>, <span class="dv">8</span>), <span class="cn">TRUE</span>)</span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a>index.logic</span></code></pre></div>
<pre><code>##  [1]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</code></pre>
<p>Ce vecteur est utile pour extraire le premier et le dernier élément de <code>de</code></p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a>de[index.logic]</span></code></pre></div>
<pre><code>##  l1 l10 
##   2   4</code></pre>
</div>
</div>
<div id="extraction-par-exclusion" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Extraction par exclusion</h3>
<p>Une autre méthode d’extraction d’éléments d’un vecteur consiste à identifier des éléments à exclure. Pour ce faire, il faut utiliser un indicateur numérique de position négatif. Voici un exemple qui permet d’extraire tous les éléments de <code>de</code> à l’exception des deux premiers.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a>de[<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)]          </span></code></pre></div>
<pre><code>##  l3  l4  l5  l6  l7  l8  l9 l10 
##   4   1   2   3   5   6   5   4</code></pre>
<p>Il est aussi possible de tronquer les derniers éléments en modifiant la longueur du vecteur.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(de) <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb267-2"><a href="#cb267-2" aria-hidden="true" tabindex="-1"></a>de</span></code></pre></div>
<pre><code>## l1 l2 l3 l4 l5 
##  2  3  4  1  2</code></pre>
<p>Si sa longueur initiale est réassignée au vecteur, que se passe-t-il?</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(de) <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a>de</span></code></pre></div>
<pre><code>## l1 l2 l3 l4 l5                
##  2  3  4  1  2 NA NA NA NA NA</code></pre>
<p>R ne sachant pas quelles données mettre dans les positions supplémentaires, il introduit sa constante pour les données manquantes <code>NA</code>.</p>
</div>
</div>
<div id="vecteurs-de-chaînes-de-caractères" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Vecteurs de chaînes de caractères</h2>
<p>Les vecteurs de chaînes de caractères sont un peu particuliers. Nous verrons dans un prochain cours des fonctions propres à la manipulation de vecteurs contenant ce type de données. Contentons-nous ici de regarder quelques exemples pour présenter ce genre de vecteurs.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a>letters</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot; &quot;t&quot;
## [21] &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<p><code>letters</code> est une constante R qui contient l’alphabet en caractères minuscules (<code>LETTERS</code> est l’équivalent en majuscules). Il s’agit d’un vecteur de chaînes de caractères.</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(letters)</span></code></pre></div>
<pre><code>##  chr [1:26] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; ...</code></pre>
<p>Une autre constante R, <code>month.name</code>, contient les noms des mois de l’année en anglais. Utilisons cette constante pour illustrer la fonction <code>nchar</code> qui indique combien de caractères contiennent des chaînes de caractères.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a>month.name</span></code></pre></div>
<pre><code>##  [1] &quot;January&quot;   &quot;February&quot;  &quot;March&quot;     &quot;April&quot;     &quot;May&quot;       &quot;June&quot;     
##  [7] &quot;July&quot;      &quot;August&quot;    &quot;September&quot; &quot;October&quot;   &quot;November&quot;  &quot;December&quot;</code></pre>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(month.name)</span></code></pre></div>
<pre><code>##  [1] 7 8 5 5 3 4 4 6 9 7 8 8</code></pre>
<p>Comme bien des fonctions R, la fonction <code>nchar</code> travaille de façon vectorielle. Si elle reçoit en entrée un vecteur, elle fait un calcul pour chaque élément du vecteur.</p>
<p>Pour savoir combien de chaînes de caractères sont contenues dans <code>month.name</code>, il faut utiliser la fonction <code>length</code>.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(month.name)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>La fonction <code>length</code> ne retourne donc pas le longueur d’une chaîne de caractères, mais bien la longueur d’un objet (soit le nombre d’éléments dans cet objet).</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="st">&quot;January&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(<span class="st">&quot;January&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div id="fonctions-paste-et-paste0" class="section level3" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Fonctions <code>paste</code> et <code>paste0</code></h3>
<p>Une fonction très utile pour créer des vecteurs de chaînes de caractères est la fonction <code>paste</code>. Comme son nom l’indique, elle permet de coller ensemble des chaînes de caractères. Par exemple, l’appel à la fonction <code>paste</code> suivant combine <code>"Hello"</code> et <code>"world"</code> dans une seule chaîne de caractères.</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;world&quot;</span>, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello world&quot;</code></pre>
<p>L’argument <code>sep = " "</code> indique à <code>paste</code> de séparer les chaînes de caractères par un espace lors de la combinaison.</p>
<p>Il existe une fonction raccourcie pour l’utilisation de la fonction <code>paste</code> avec <code>sep = ""</code> (aucun caractère pour séparer les chaînes de caractères) : la fonction <code>paste0</code>.</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;world&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Helloworld&quot;</code></pre>
<p>En comparaison, la combinaison de ces deux chaînes de caractères avec la fonction <code>c</code> aurait créé un vecteur de longueur 2.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a>tentative <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;world&quot;</span>)</span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tentative)</span></code></pre></div>
<pre><code>##  chr [1:2] &quot;Hello&quot; &quot;world&quot;</code></pre>
<p>Les fonctions <code>paste</code> et <code>paste0</code> travaillent, tout comme <code>nchar</code>, de façon vectorielle. Si elles reçoivent en entrée des vecteurs, elles les combinent élément par élément et retournent un vecteur de même longueur que ceux fournis.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(LETTERS, letters, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;A-a&quot; &quot;B-b&quot; &quot;C-c&quot; &quot;D-d&quot; &quot;E-e&quot; &quot;F-f&quot; &quot;G-g&quot; &quot;H-h&quot; &quot;I-i&quot; &quot;J-j&quot; &quot;K-k&quot; &quot;L-l&quot; &quot;M-m&quot;
## [14] &quot;N-n&quot; &quot;O-o&quot; &quot;P-p&quot; &quot;Q-q&quot; &quot;R-r&quot; &quot;S-s&quot; &quot;T-t&quot; &quot;U-u&quot; &quot;V-v&quot; &quot;W-w&quot; &quot;X-x&quot; &quot;Y-y&quot; &quot;Z-z&quot;</code></pre>
<p>Les fonctions <code>paste</code> et <code>paste0</code> permettent aussi de combiner dans une seule chaîne de caractères les chaînes de caractères comprises dans un vecteur grâce à leur argument <code>collapse</code>.</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(LETTERS, <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z&quot;</code></pre>
<hr />
</div>
</div>
</div>
<div id="matrices" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Matrices</h1>
<p>Une matrice est un objet atomique à deux dimensions. Elle possède des lignes et des colonnes. Toutes les données qu’elle contient sont du même type.</p>
<div id="obtention-dinformations-1" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Obtention d’informations</h2>
<p>Observons la matrice <code>mat</code> présentée précédemment.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a>mat</span></code></pre></div>
<pre><code>##       [,1]  [,2]  [,3]
## [1,]  TRUE FALSE FALSE
## [2,]  TRUE  TRUE FALSE
## [3,] FALSE  TRUE  TRUE
## [4,]  TRUE  TRUE  TRUE</code></pre>
<p>Quelles sont les informations relatives à cet objet?</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mat)</span></code></pre></div>
<pre><code>##  logi [1:4, 1:3] TRUE TRUE FALSE TRUE FALSE TRUE ...</code></pre>
<p>Il contient des éléments de type logique.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mat)</span></code></pre></div>
<pre><code>## [1] 4 3</code></pre>
<p>Il possède deux dimensions.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mat)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>La taille de sa première dimension est vue comme un nombre de lignes. Il y en a 4.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(mat)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>La taille de sa deuxième dimension est vue comme un nombre de colonnes. Il y en a 3.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(mat)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>La longueur d’une matrice est son nombre total d’éléments, soit 12 dans cet exemple.</p>
</div>
<div id="création-1" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Création</h2>
<div id="fonction-matrix" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Fonction <code>matrix</code></h3>
<p>La fonction <code>matrix</code> permet de créer un objet de type matrice à partir d’un vecteur contenant les éléments à mettre dans la matrice.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>), </span>
<span id="cb307-3"><a href="#cb307-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span></span>
<span id="cb307-4"><a href="#cb307-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>L’objet obtenu est celui que nous venons d’observer.</p>
<p>La fonction <code>matrix</code> attend comme premier argument un vecteur d’éléments, ensuite un nombre de colonnes (argument <code>ncol</code>) et/ou un nombre de lignes (argument <code>nrow</code>). L’argument <code>byrow</code> permet de spécifier si les éléments du vecteur fourni comme premier argument doivent être placés dans la matrice ligne par ligne ou colonne par colonne (ce qui est fait par défaut).</p>
</div>
<div id="fonction-as.matrix" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Fonction <code>as.matrix</code></h3>
<p>Pour tenter de convertir en matrice un objet d’un autre type, la fonction <code>as.matrix</code> est utile. Par exemple, convertissons en matrice la data frame <code>dat</code> créé précédemment.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.matrix</span>(dat)</span></code></pre></div>
<pre><code>##      V1    V2           V3     
## [1,] &quot;3.5&quot; &quot;matin&quot;      NA     
## [2,] &quot;7.8&quot; &quot;après-midi&quot; &quot;FALSE&quot;
## [3,] &quot;9.9&quot; &quot;soir&quot;       &quot;FALSE&quot;
## [4,] &quot;5.7&quot; &quot;nuit&quot;       &quot;TRUE&quot;</code></pre>
<p>Étant donné qu’une matrice est un objet atomique, tous ses éléments doivent être des données du même type. Ici, toutes les données ont donc été converties en chaînes de caractères. Nous reviendrons plus loin sur les <a href="#conversions">conversions de types de données</a>.</p>
</div>
<div id="fonctions-rbind-et-cbind" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Fonctions <code>rbind</code> et <code>cbind</code></h3>
<p>Nous allons maintenant étendre notre exemple de données provenant de 10 lancers d’un dé à des données provenant de 10 lancers de 2 dés. Supposons donc qu’en plus des résultats du dé 1 (2, 3, 4, 1, 2, 3, 5, 6, 5, 4), nous avons les résultats du dé 2 : 1, 4, 2, 3, 5, 4, 6, 2, 5, 3.</p>
<p>Les fonctions <code>rbind</code> et <code>cbind</code> permettent de créer des matrices à partir d’une série de vecteurs de même longueur, comme dans cet exemple.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a>de_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">4</span>)</span>
<span id="cb310-2"><a href="#cb310-2" aria-hidden="true" tabindex="-1"></a>de_2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>)</span></code></pre></div>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a>des_lignes <span class="ot">&lt;-</span> <span class="fu">rbind</span>(de_1, de_2)</span>
<span id="cb311-2"><a href="#cb311-2" aria-hidden="true" tabindex="-1"></a>des_lignes</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
## de_1    2    3    4    1    2    3    5    6    5     4
## de_2    1    4    2    3    5    4    6    2    5     3</code></pre>
<p>Le <code>r</code> dans le nom <code>rbind</code> indique que la fonction combine des vecteurs par <em>rows</em> en anglais ou lignes en français, dans le sens que chacun des vecteurs devient une ligne de la matrice produite.</p>
<p>Pour les données de lancers de dés, il serait plus approprié de combiner les vecteurs par colonnes, afin que les lignes de la matrice obtenue représentent des observations et les colonnes des variables. Nous utiliserons donc plutôt <code>cbind</code> (<code>c</code> pour <em>columns</em> en anglais ou colonnes en français)</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a>des <span class="ot">&lt;-</span> <span class="fu">cbind</span>(de_1, de_2)</span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a>des</span></code></pre></div>
<pre><code>##       de_1 de_2
##  [1,]    2    1
##  [2,]    3    4
##  [3,]    4    2
##  [4,]    1    3
##  [5,]    2    5
##  [6,]    3    4
##  [7,]    5    6
##  [8,]    6    2
##  [9,]    5    5
## [10,]    4    3</code></pre>
</div>
</div>
<div id="concaténation-de-matrices" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Concaténation de matrices</h2>
<div id="fonctions-rbind-et-cbind-1" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Fonctions <code>rbind</code> et <code>cbind</code></h3>
<p>Les fonctions <code>rbind</code> et <code>cbind</code> acceptent aussi en entrée des matrices, qu’elles concatènent, comme dans cet exemple.</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(des_lignes, des_lignes)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
## de_1    2    3    4    1    2    3    5    6    5     4
## de_2    1    4    2    3    5    4    6    2    5     3
## de_1    2    3    4    1    2    3    5    6    5     4
## de_2    1    4    2    3    5    4    6    2    5     3</code></pre>
<p>Des matrices concaténées en lignes doivent avoir le même nombre de colonnes et des matrices concaténées en colonnes doivent avoir le même nombre de lignes.</p>
</div>
</div>
<div id="métadonnées-1" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Métadonnées</h2>
<p>Les lignes et colonnes d’une matrice peuvent être nommées (ou renommés).</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(des) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;l&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(des) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;de&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb317-3"><a href="#cb317-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(des)</span></code></pre></div>
<pre><code>##  num [1:10, 1:2] 2 3 4 1 2 3 5 6 5 4 ...
##  - attr(*, &quot;dimnames&quot;)=List of 2
##   ..$ : chr [1:10] &quot;l1&quot; &quot;l2&quot; &quot;l3&quot; &quot;l4&quot; ...
##   ..$ : chr [1:2] &quot;de1&quot; &quot;de2&quot;</code></pre>
<p>Les noms des lignes et colonnes d’une matrice R sont des attributs de l’objet, tout comme les tailles de ses dimensions.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(des)</span></code></pre></div>
<pre><code>## $dim
## [1] 10  2
## 
## $dimnames
## $dimnames[[1]]
##  [1] &quot;l1&quot;  &quot;l2&quot;  &quot;l3&quot;  &quot;l4&quot;  &quot;l5&quot;  &quot;l6&quot;  &quot;l7&quot;  &quot;l8&quot;  &quot;l9&quot;  &quot;l10&quot;
## 
## $dimnames[[2]]
## [1] &quot;de1&quot; &quot;de2&quot;</code></pre>
<p>Les noms des lignes peuvent être extraits des plusieurs façons :</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(des)</span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a><span class="co">#ou</span></span>
<span id="cb321-3"><a href="#cb321-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(des)[[<span class="dv">1</span>]]</span>
<span id="cb321-4"><a href="#cb321-4" aria-hidden="true" tabindex="-1"></a><span class="co">#ou</span></span></code></pre></div>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(des, <span class="at">which =</span> <span class="st">&quot;dimnames&quot;</span>)[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>##  [1] &quot;l1&quot;  &quot;l2&quot;  &quot;l3&quot;  &quot;l4&quot;  &quot;l5&quot;  &quot;l6&quot;  &quot;l7&quot;  &quot;l8&quot;  &quot;l9&quot;  &quot;l10&quot;</code></pre>
<p>Les noms des colonnes peuvent être extraits de façons similaires avec la fonction <code>colnames</code> et l’élément 2 de l’attribut <code>dimnames</code>.</p>
</div>
<div id="extraction-déléments-1" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Extraction d’éléments</h2>
<p>Tout ce qui a été mentionné concernant l’extraction de données dans un vecteur fonctionne aussi pour une matrice. Cependant, il y a maintenant deux dimensions à considérer.</p>
<div id="un-seul-élément-1" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Un seul élément</h3>
<p>Un élément est identifié par sa position en ligne et en colonne.</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a>des[<span class="dv">9</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>En réalité, cette extraction est équivalente à</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a>des[<span class="dv">19</span>]</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>parce qu’en mémoire, une matrice est stockée comme un vecteur, en mettant bout à bout ses colonnes.</p>
</div>
<div id="plusieurs-éléments-1" class="section level3" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Plusieurs éléments</h3>
<p>Il est possible d’extraire des lignes complètes,</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a>des[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, ]</span></code></pre></div>
<pre><code>##    de1 de2
## l2   3   4
## l3   4   2
## l4   1   3</code></pre>
<p>ou encore des colonnes.</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a>des[, <span class="sc">-</span><span class="dv">2</span>]</span></code></pre></div>
<pre><code>##  l1  l2  l3  l4  l5  l6  l7  l8  l9 l10 
##   2   3   4   1   2   3   5   6   5   4</code></pre>
<p>Étant donné qu’il ne restait qu’une seule colonne, R a par défaut transformé la matrice en vecteur. Rappelons que pour empêcher cette simplification d’être effectuée, il faut utiliser l’argument <code>drop = FALSE</code>.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a>des[, <span class="sc">-</span><span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code></pre></div>
<pre><code>##     de1
## l1    2
## l2    3
## l3    4
## l4    1
## l5    2
## l6    3
## l7    5
## l8    6
## l9    5
## l10   4</code></pre>
<p>Les lignes ou les colonnes peuvent aussi être identifiées par leur nom dans l’extraction.</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a>des[, <span class="st">&quot;de1&quot;</span>]</span></code></pre></div>
<pre><code>##  l1  l2  l3  l4  l5  l6  l7  l8  l9 l10 
##   2   3   4   1   2   3   5   6   5   4</code></pre>
<hr />
</div>
</div>
</div>
<div id="arrays" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Arrays</h1>
<p>Une matrice est en fait un cas particulier d’array, à deux dimensions.</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.array</span>(mat)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>L’array est un objet atomique pouvant posséder un nombre quelconque de dimensions.</p>
<div id="obtention-dinformations-2" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Obtention d’informations</h2>
<p>Reprenons l’array <code>arr</code> illustré précédemment.</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(arr)</span></code></pre></div>
<pre><code>##  num [1:2, 1:3, 1:4] 2 4 3 1 6 3 9 2 6 3 ...</code></pre>
<p>Comme pour une matrice, la fonction <code>dim</code> retourne les tailles de ses dimensions.</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(arr)</span></code></pre></div>
<pre><code>## [1] 2 3 4</code></pre>
<p>Sa longueur est aussi le nombre total d’éléments qu’il contient.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(arr)</span></code></pre></div>
<pre><code>## [1] 24</code></pre>
</div>
<div id="création-2" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Création</h2>
<div id="fonction-array" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Fonction <code>array</code></h3>
<p>La fonction <code>array</code> sert à créer des arrays. Il faut lui fournir le vecteur des éléments à stocker dans l’array et les tailles des dimensions de celui-ci, comme dans cet exemple.</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a>collection <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb344-2"><a href="#cb344-2" aria-hidden="true" tabindex="-1"></a>collection</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    5    7
## [2,]    6    8
## 
## , , 3
## 
##      [,1] [,2]
## [1,]    9   11
## [2,]   10   12</code></pre>
<p>Les arrays sont utiles, notamment, pour ranger dans une même structure plusieurs matrices de même taille.</p>
</div>
<div id="fonction-as.array" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Fonction <code>as.array</code></h3>
<p>Il est aussi possible de tenter de créer un array à partir d’un objet R quelconque avec <code>as.array</code>. Par exemple, les vecteurs ne sont pas considérés comme des types particuliers d’arrays.</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## [1] 2.0 4.9 2.0 0.2</code></pre>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.array</span>(vec)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Cependant, un vecteur peut être transformé en array comme suit.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a>array_vec <span class="ot">&lt;-</span> <span class="fu">as.array</span>(vec)</span>
<span id="cb350-2"><a href="#cb350-2" aria-hidden="true" tabindex="-1"></a>array_vec</span></code></pre></div>
<pre><code>## [1] 2.0 4.9 2.0 0.2</code></pre>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.array</span>(array_vec)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Même si les affichages des objets <code>vec</code> et <code>array_vec</code> sont identiques, les deux objets ne sont pas du même type.</p>
</div>
</div>
<div id="métadonnées-2" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Métadonnées</h2>
<p>Pour donner des noms aux éléments selon les dimensions d’un array, il faut utiliser une liste comme suit.</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(collection) <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb354-2"><a href="#cb354-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">&quot;ligne&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>), </span>
<span id="cb354-3"><a href="#cb354-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">&quot;colonne&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb354-4"><a href="#cb354-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">&quot;matrice&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb354-5"><a href="#cb354-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb354-6"><a href="#cb354-6" aria-hidden="true" tabindex="-1"></a>collection</span></code></pre></div>
<pre><code>## , , matrice1
## 
##        colonne1 colonne2
## ligne1        1        3
## ligne2        2        4
## 
## , , matrice2
## 
##        colonne1 colonne2
## ligne1        5        7
## ligne2        6        8
## 
## , , matrice3
## 
##        colonne1 colonne2
## ligne1        9       11
## ligne2       10       12</code></pre>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(collection)</span></code></pre></div>
<pre><code>##  int [1:2, 1:2, 1:3] 1 2 3 4 5 6 7 8 9 10 ...
##  - attr(*, &quot;dimnames&quot;)=List of 3
##   ..$ : chr [1:2] &quot;ligne1&quot; &quot;ligne2&quot;
##   ..$ : chr [1:2] &quot;colonne1&quot; &quot;colonne2&quot;
##   ..$ : chr [1:3] &quot;matrice1&quot; &quot;matrice2&quot; &quot;matrice3&quot;</code></pre>
</div>
<div id="extraction-déléments-2" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Extraction d’éléments</h2>
<p>Quelques exemples :</p>
<ul>
<li>extraction de la première matrice,</li>
</ul>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a>collection[, , <span class="dv">1</span>]</span></code></pre></div>
<pre><code>##        colonne1 colonne2
## ligne1        1        3
## ligne2        2        4</code></pre>
<ul>
<li>extraction de l’élément en position (1,2) de toutes les matrices,</li>
</ul>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a>collection[<span class="dv">1</span>, <span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>## matrice1 matrice2 matrice3 
##        3        7       11</code></pre>
<ul>
<li>extraction de la deuxième ligne des matrices 2 et 3</li>
</ul>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true" tabindex="-1"></a>collection[<span class="dv">2</span>, , <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>##          matrice2 matrice3
## colonne1        6       10
## colonne2        8       12</code></pre>
<hr />
</div>
</div>
<div id="listes" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Listes</h1>
<p>La liste est semblable au vecteur dans le sens qu’elle combine des éléments. Cependant, les éléments d’un vecteur sont des données, toutes de même type. Les éléments d’une liste sont plutôt des objets, de types quelconques. Il s’agit d’un objet récursif.</p>
<p>Les fonctions qui ont plus d’un objet à retourner en sortie (ex. la fonction <code>lm</code> pour faire de la régression) retournent une liste de tous ces objets.</p>
<div id="obtention-dinformations-3" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Obtention d’informations</h2>
<p>Jetons un coup d’oeil à la liste <code>liste</code> tirée de l’introduction.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(liste)</span></code></pre></div>
<pre><code>## List of 3
##  $ : num [1:2, 1:2] 2 4 3 1
##  $ :List of 2
##   ..$ : num [1:2] 2 3
##   ..$ : num 8
##  $ :&#39;data.frame&#39;:    3 obs. of  2 variables:
##   ..$ V1: num [1:3] 2 4 3
##   ..$ V2: num [1:3] 1 5 3</code></pre>
<p>Elle contient une matrice, une autre liste et un data frame. La liste est de longueur 3 car elle comporte trois sous-objets.</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(liste)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
<div id="création-3" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Création</h2>
<div id="fonction-list" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Fonction <code>list</code></h3>
<p>Nous venons tout juste d’utiliser la fonction de création de listes nommée <code>list</code> pour créer la valeur à assigner à l’attribut <code>dimnames</code> de l’array <code>collection</code>.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a>noms <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">&quot;ligne&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>), </span>
<span id="cb368-3"><a href="#cb368-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">&quot;colonne&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb368-4"><a href="#cb368-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">&quot;matrice&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb368-5"><a href="#cb368-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb368-6"><a href="#cb368-6" aria-hidden="true" tabindex="-1"></a>noms</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;ligne1&quot; &quot;ligne2&quot;
## 
## [[2]]
## [1] &quot;colonne1&quot; &quot;colonne2&quot;
## 
## [[3]]
## [1] &quot;matrice1&quot; &quot;matrice2&quot; &quot;matrice3&quot;</code></pre>
<p>Pour utiliser cette fonction, il suffit de lui donner en entrée tous les objets à inclure dans la liste, dans l’ordre souhaité.</p>
</div>
<div id="fonction-as.list" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Fonction <code>as.list</code></h3>
<p>La fonction <code>as.list</code> permet quant à elle de transformer n’importe quel objet R en liste. Par exemple, en appliquant la fonction <code>as.list</code> sur un vecteur, elle crée une liste pour laquelle chaque élément du vecteur est devenu un vecteur de longueur 1 en élément de la liste.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.list</span>(vec)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 2
## 
## [[2]]
## [1] 4.9
## 
## [[3]]
## [1] 2
## 
## [[4]]
## [1] 0.2</code></pre>
<p>Pour obtenir plutôt une liste de longueur 1 comportant le vecteur comme seul élément, il aurait plutôt fallu utiliser la fonction <code>list</code> comme suit.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(vec)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 2.0 4.9 2.0 0.2</code></pre>
</div>
<div id="fonction-vector-1" class="section level3" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Fonction <code>vector</code></h3>
<p>La fonction <code>vector</code> permet aussi de créer des listes (rappelons qu’une liste est considérée être un vecteur récursif).</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a>ex <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="dv">2</span>)</span>
<span id="cb374-2"><a href="#cb374-2" aria-hidden="true" tabindex="-1"></a>ex</span></code></pre></div>
<pre><code>## [[1]]
## NULL
## 
## [[2]]
## NULL</code></pre>
<p>Une liste créée avec la fonction <code>vector</code>, comme dans l’exemple ci-dessus, est initialement vide. Elle est remplie en assignant des objets à ses éléments.</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a>ex[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">4</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb376-2"><a href="#cb376-2" aria-hidden="true" tabindex="-1"></a>ex</span></code></pre></div>
<pre><code>## [[1]]
##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## 
## [[2]]
## NULL</code></pre>
</div>
</div>
<div id="concaténation-de-listes" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Concaténation de listes</h2>
<div id="fonction-c-2" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Fonction <code>c</code></h3>
<p>Les éléments de plusieurs listes peuvent être concaténés avec la fonction <code>c</code> comme suit.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a>combine <span class="ot">&lt;-</span> <span class="fu">c</span>(noms, ex)</span>
<span id="cb378-2"><a href="#cb378-2" aria-hidden="true" tabindex="-1"></a>combine</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;ligne1&quot; &quot;ligne2&quot;
## 
## [[2]]
## [1] &quot;colonne1&quot; &quot;colonne2&quot;
## 
## [[3]]
## [1] &quot;matrice1&quot; &quot;matrice2&quot; &quot;matrice3&quot;
## 
## [[4]]
##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## 
## [[5]]
## NULL</code></pre>
<p>Ainsi, la fonction <code>c</code> n’est pas seulement utile avec les vecteurs atomiques, elle l’est aussi avec les vecteurs récursifs.</p>
</div>
</div>
<div id="métadonnées-3" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Métadonnées</h2>
<p>Les éléments d’une liste peuvent être nommés en utilisant la fonction <code>names</code> sur une liste déjà existante comme suit.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(noms) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;lignes&quot;</span>, <span class="st">&quot;colonnes&quot;</span>, <span class="st">&quot;matrices&quot;</span>)</span>
<span id="cb380-2"><a href="#cb380-2" aria-hidden="true" tabindex="-1"></a>noms</span></code></pre></div>
<pre><code>## $lignes
## [1] &quot;ligne1&quot; &quot;ligne2&quot;
## 
## $colonnes
## [1] &quot;colonne1&quot; &quot;colonne2&quot;
## 
## $matrices
## [1] &quot;matrice1&quot; &quot;matrice2&quot; &quot;matrice3&quot;</code></pre>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(noms)</span></code></pre></div>
<pre><code>## List of 3
##  $ lignes  : chr [1:2] &quot;ligne1&quot; &quot;ligne2&quot;
##  $ colonnes: chr [1:2] &quot;colonne1&quot; &quot;colonne2&quot;
##  $ matrices: chr [1:3] &quot;matrice1&quot; &quot;matrice2&quot; &quot;matrice3&quot;</code></pre>
<p>Ils peuvent aussi être nommés directement dans une commande de création avec la fonction <code>list</code>, en précédant la spécification de chaque objet par un nom et l’opérateur <code>=</code>.</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a>exemple <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">mat =</span> des, <span class="at">fct =</span> casefold, <span class="at">liste =</span> noms)</span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true" tabindex="-1"></a>exemple</span></code></pre></div>
<pre><code>## $mat
##     de1 de2
## l1    2   1
## l2    3   4
## l3    4   2
## l4    1   3
## l5    2   5
## l6    3   4
## l7    5   6
## l8    6   2
## l9    5   5
## l10   4   3
## 
## $fct
## function (x, upper = FALSE) 
## if (upper) toupper(x) else tolower(x)
## &lt;bytecode: 0x000000001623c2f0&gt;
## &lt;environment: namespace:base&gt;
## 
## $liste
## $liste$lignes
## [1] &quot;ligne1&quot; &quot;ligne2&quot;
## 
## $liste$colonnes
## [1] &quot;colonne1&quot; &quot;colonne2&quot;
## 
## $liste$matrices
## [1] &quot;matrice1&quot; &quot;matrice2&quot; &quot;matrice3&quot;</code></pre>
</div>
<div id="extraction-déléments-3" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Extraction d’éléments</h2>
<div id="un-seul-élément-2" class="section level3" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Un seul élément</h3>
<p>Voici quelques exemples :</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1" aria-hidden="true" tabindex="-1"></a>noms[<span class="dv">1</span>]          </span></code></pre></div>
<pre><code>## $lignes
## [1] &quot;ligne1&quot; &quot;ligne2&quot;</code></pre>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a>noms[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;ligne1&quot; &quot;ligne2&quot;</code></pre>
<p>Nous avons déjà vu un exemple similaire. Il est important de remarquer ici que <code>noms[1]</code> est une liste de longueur 1, alors que <code>noms[[1]]</code> est l’objet en position 1 dans la liste <code>noms</code>, soit ici un vecteur. L’opérateur <code>[[</code> sort l’élément extrait de la structure de l’objet d’origine si celui-ci est récursif.</p>
<p>D’ailleurs, puisqu’une liste est un objet récursif, l’opérateur <code>$</code> peut être utilisé pour extraire un de ses éléments. Cependant, l’opérateur <code>$</code> est seulement utilisable lorsque les éléments de la liste sont nommés. Il faut inscrire le nom de l’élément à extraire après l’opérateur, comme dans cet exemple.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true" tabindex="-1"></a>noms<span class="sc">$</span>lignes</span></code></pre></div>
<pre><code>## [1] &quot;ligne1&quot; &quot;ligne2&quot;</code></pre>
<p>Cette dernière opération est équivalente à la suivante.</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a>noms[[<span class="st">&quot;lignes&quot;</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;ligne1&quot; &quot;ligne2&quot;</code></pre>
<p>Contrairement à l’opérateur <code>[[</code>, l’opérateur <code>$</code> n’exige pas que le nom de l’élément à extraire soit encadré de guillemets, sauf s’il comporte un ou des espaces.</p>
<p>Il est parfois utile d’utiliser des opérateurs d’extraction à la chaîne. Par exemple, la commande suivante extrait l’élément <code>lignes</code> dans le sous-objet <code>liste</code> de la liste <code>exemple</code>.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a>exemple<span class="sc">$</span>liste<span class="sc">$</span>lignes</span></code></pre></div>
<pre><code>## [1] &quot;ligne1&quot; &quot;ligne2&quot;</code></pre>
</div>
<div id="plusieurs-éléments-2" class="section level3" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Plusieurs éléments</h3>
<p>Pour extraire d’un coup plusieurs éléments d’une liste, il faut employer l’opérateur <code>[</code>. Voici un exemple.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a>noms[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code></pre></div>
<pre><code>## $lignes
## [1] &quot;ligne1&quot; &quot;ligne2&quot;
## 
## $colonnes
## [1] &quot;colonne1&quot; &quot;colonne2&quot;</code></pre>
</div>
<div id="extraction-par-exclusion-1" class="section level3" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> Extraction par exclusion</h3>
<p>La façon la plus simple de retirer un élément d’une liste est d’assigner la valeur <code>NULL</code> à l’élément en question.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a>noms<span class="sc">$</span>lignes <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb398-2"><a href="#cb398-2" aria-hidden="true" tabindex="-1"></a>noms</span></code></pre></div>
<pre><code>## $colonnes
## [1] &quot;colonne1&quot; &quot;colonne2&quot;
## 
## $matrices
## [1] &quot;matrice1&quot; &quot;matrice2&quot; &quot;matrice3&quot;</code></pre>
</div>
</div>
<div id="conversion-en-vecteur-atomique" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Conversion en vecteur atomique</h2>
<p>Si les éléments de plus bas niveau d’une liste sont tous des données de même type, on pourrait vouloir les mettre bout à bout dans un vecteur. La fonction <code>unlist</code> permet de réaliser facilement cette tâche, comme dans cet exemple.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="#cb400-1" aria-hidden="true" tabindex="-1"></a>liste</span></code></pre></div>
<pre><code>## [[1]]
##      [,1] [,2]
## [1,]    2    3
## [2,]    4    1
## 
## [[2]]
## [[2]][[1]]
## [1] 2 3
## 
## [[2]][[2]]
## [1] 8
## 
## 
## [[3]]
##   V1 V2
## 1  2  1
## 2  4  5
## 3  3  3</code></pre>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(liste)</span></code></pre></div>
<pre><code>##                             V11 V12 V13 V21 V22 V23 
##   2   4   3   1   2   3   8   2   4   3   1   5   3</code></pre>
<hr />
</div>
</div>
<div id="data-frames" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Data frames</h1>
<p>Peu de langages de programmation possèdent une structure de données équivalente au data frame de R. Il s’agit d’une structure spécifiquement conçue pour stocker des jeux de données.</p>
<div id="jeux-de-données" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Jeux de données</h2>
<p>Afin de mieux comprendre le data frame, rappelons d’abord quelques définitions relatives à un jeu de données (définitions sont tirées de <span class="citation">[<a href="#ref-tabfreq" role="doc-biblioref">2</a>]</span>).</p>
<div id="définitions" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Définitions</h3>
<ul>
<li><p><strong>Données</strong> : En statistique, des données sont des valeurs numériques (des nombres) ou alphanumériques (des chaînes de caractères) représentant les observations de certaines variables sur certains individus. Elles se présentent souvent sous la forme de jeux de données, c’est-à-dire de tableaux de valeurs, stockées dans un fichier informatique.</p></li>
<li><p><strong>Population</strong> : La population est l’ensemble de référence sur lequel porte l’étude dans le cadre de laquelle les données ont été recueillies.</p></li>
<li><p><strong>Individu ou unité statistique</strong> : Un individu est un élément de la population. L’ensemble des individus constitue la population. Chaque observation est associée à un individu.</p></li>
<li><p><strong>Échantillon</strong> : L’échantillon est un sous-groupe de la population, composé des individus pour lesquels des observations ont été recueillies. Si des mesures ont été prises pour tous les individus de la population, il s’agit d’un recensement.</p></li>
<li><p><strong>Variable</strong> : Le terme variable désigne la représentation d’une caractéristique des individus. Ainsi, une variable n’est pas la caractéristique elle-même, mais plutôt une mesure de cette caractéristique.</p></li>
<li><p><strong>Observation</strong> : Une observation est l’ensemble des valeurs obtenues en mesurant des variables sur un individu de la population.</p></li>
</ul>
</div>
<div id="représentation-en-r" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Représentation en R</h3>
<p>Dans un logiciel informatique, une façon courante de stocker un jeu de données est d’utiliser une structure de données à deux dimensions et d’y placer les observations en lignes et les variables en colonnes. En R, si toutes les variables sont du même type, il est possible d’utiliser une matrice. Cependant, lorsque les valeurs observées des différentes variables ne sont pas du même type, par exemple si certaines sont numériques et d’autres caractères, il est impossible de regrouper ces variables au sein d’une seule matrice. Le data frame a été créé pour stocker un tel jeu de données.</p>
<p>Observons de nouveau la structure du data frame illustré en introduction.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a>dat</span></code></pre></div>
<pre><code>##    V1         V2    V3
## 1 3.5      matin    NA
## 2 7.8 après-midi FALSE
## 3 9.9       soir FALSE
## 4 5.7       nuit  TRUE</code></pre>
<p>Il s’agit d’un exemple de jeu de données sous la forme « observations en lignes, variables en colonnes ». La sortie de la fonction <code>str</code> appliquée à un data frame énonce clairement cette interprétation du data frame.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4 obs. of  3 variables:
##  $ V1: num  3.5 7.8 9.9 5.7
##  $ V2: chr  &quot;matin&quot; &quot;après-midi&quot; &quot;soir&quot; &quot;nuit&quot;
##  $ V3: logi  NA FALSE FALSE TRUE</code></pre>
<p>Ici, la mention « <code>4 obs. of 3 variables</code> » signifie que les lignes doivent être vues comme des observations et les colonnes comme des variables.</p>
</div>
</div>
<div id="obtention-dinformations-4" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Obtention d’informations</h2>
<p>Le data frame <code>dat</code> possède les attributs <code>names</code>, <code>row.names</code> et <code>class</code>.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(dat)</span></code></pre></div>
<pre><code>## $names
## [1] &quot;V1&quot; &quot;V2&quot; &quot;V3&quot;
## 
## $row.names
## [1] 1 2 3 4
## 
## $class
## [1] &quot;data.frame&quot;</code></pre>
<p>Tout data frame possède ces attributs par défaut. Il s’agit des noms des éléments selon la dimension, ainsi que d’une « classe » identifiant le type de l’objet. Les types d’objets vus précédemment n’ont pas un tel attribut.</p>
<p>En contrepartie, le vecteur des tailles des dimensions est un attribut pour les matrices et les arrays, alors qu’il n’en est pas un pour les data frames. Les fonctions <code>dim</code>, <code>nrow</code> et <code>ncol</code> fonctionnent tout de même avec des data frames.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dat)</span></code></pre></div>
<pre><code>## [1] 4 3</code></pre>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dat)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(dat)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Comme pour tout objet R, la longueur d’un data frame est le nombre d’éléments qu’il contient.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(dat)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Pourquoi la longueur de <code>dat</code> n’est-elle pas <span class="math inline">\(4 \times 3 = 12\)</span>?</p>
<p>Parce qu’un data frame est un objet récursif dont les éléments sont les colonnes.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(dat)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>Alors, le nombre d’éléments dans un data frame correspond au nombre de colonnes. C’est aussi pour cette raison que les noms des éléments d’un data frame sont aussi considérés comme les noms des colonnes.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dat)</span></code></pre></div>
<pre><code>## [1] &quot;V1&quot; &quot;V2&quot; &quot;V3&quot;</code></pre>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat)</span></code></pre></div>
<pre><code>## [1] &quot;V1&quot; &quot;V2&quot; &quot;V3&quot;</code></pre>
</div>
<div id="création-4" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Création</h2>
<div id="fonction-data.frame" class="section level3" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Fonction <code>data.frame</code></h3>
<p>Ajoutons à la matrice <code>des</code> créée précédemment, qui contient des données fictives de lancers de deux dés, une colonne contenant le nom de la personne qui a lancé le dé. Le résultat ne peut pas être une matrice si nous voulons conserver des données de type numérique dans les deux premières colonnes et caractère dans la troisième colonne. Il faut donc créer un data frame, ce que réalise la commande suivante.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a>des_plus <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(des, <span class="at">lanceur =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Luc&quot;</span>, <span class="st">&quot;Kim&quot;</span>), <span class="at">each =</span> <span class="dv">5</span>))</span>
<span id="cb424-2"><a href="#cb424-2" aria-hidden="true" tabindex="-1"></a>des_plus</span></code></pre></div>
<pre><code>##     de1 de2 lanceur
## l1    2   1     Luc
## l2    3   4     Luc
## l3    4   2     Luc
## l4    1   3     Luc
## l5    2   5     Luc
## l6    3   4     Kim
## l7    5   6     Kim
## l8    6   2     Kim
## l9    5   5     Kim
## l10   4   3     Kim</code></pre>
<p>La principale fonction de création d’un data frame se nomme <code>data.frame</code>. Il faut lui donner en entrée tous les vecteurs et/ou facteurs que le data frame doit contenir, dans l’ordre désiré. La fonction <code>data.frame</code> accepte aussi en entrée des matrices, comme dans l’exemple précédent, auquel cas les colonnes des matrices en entrée deviennent des colonnes dans le data frame en sortie.</p>
<p>Regardons la structure interne du data frame que nous venons de créer.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(des_plus)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  3 variables:
##  $ de1    : num  2 3 4 1 2 3 5 6 5 4
##  $ de2    : num  1 4 2 3 5 4 6 2 5 3
##  $ lanceur: chr  &quot;Luc&quot; &quot;Luc&quot; &quot;Luc&quot; &quot;Luc&quot; ...</code></pre>
<p>Les trois colonnes de <code>des_plus</code> sont des vecteurs.</p>
<p style="font-size:110%">
<strong>Remarque : changement depuis la version 4.0.0 de R</strong>
</p>
<p>Avec une version de R antérieure à 4.0.0, la troisième colonne de <code>des_plus</code> serait un facteur plutôt qu’un vecteur, parce que la valeur par défaut de l’argument <code>stringsAsFactors</code> de la fonction <code>data.frame</code> était auparavant <code>TRUE</code>.</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a>des_plus_fac <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb428-2"><a href="#cb428-2" aria-hidden="true" tabindex="-1"></a>  des,</span>
<span id="cb428-3"><a href="#cb428-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">lanceur =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Luc&quot;</span>, <span class="st">&quot;Kim&quot;</span>), <span class="at">each =</span> <span class="dv">5</span>), </span>
<span id="cb428-4"><a href="#cb428-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span></span>
<span id="cb428-5"><a href="#cb428-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb428-6"><a href="#cb428-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(des_plus_fac)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  3 variables:
##  $ de1    : num  2 3 4 1 2 3 5 6 5 4
##  $ de2    : num  1 4 2 3 5 4 6 2 5 3
##  $ lanceur: Factor w/ 2 levels &quot;Kim&quot;,&quot;Luc&quot;: 2 2 2 2 2 1 1 1 1 1</code></pre>
<p>La valeur <code>TRUE</code> assignée à l’argument <code>stringsAsFactors</code> a pour conséquence que <code>data.frame</code> transforme les vecteurs contenant des données de type caractère en facteur.</p>
<p>Notons que si vous aimeriez revenir à l’ancien comportement par défaut de R, vous pouvez modifier globalement la valeur par défaut de l’argument <code>stringsAsFactors</code> comme suit.</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Cette commande provoque un changement qui affecte toutes les fonctions ayant un argument <code>stringsAsFactors</code> (la fonction <code>data.frame</code> n’est pas la seule à avoir cet argument).</p>
</div>
<div id="fonction-as.data.frame" class="section level3" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Fonction <code>as.data.frame</code></h3>
<p>Pour transformer, si possible, un objet R en data frame, il faut utiliser la fonction <code>as.data.frame</code>. Par exemple, transformons la matrice <code>mat</code> en data frame.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true" tabindex="-1"></a>df_mat <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(mat)</span>
<span id="cb431-2"><a href="#cb431-2" aria-hidden="true" tabindex="-1"></a>df_mat</span></code></pre></div>
<pre><code>##      V1    V2    V3
## 1  TRUE FALSE FALSE
## 2  TRUE  TRUE FALSE
## 3 FALSE  TRUE  TRUE
## 4  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<div id="concaténation-de-data-frames" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Concaténation de data frames</h2>
<div id="fonction-data.frame-1" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Fonction <code>data.frame</code></h3>
<p>En plus de servir à créer des data frames, la fonction <code>data.frame</code> permet d’en combiner par concaténation de colonnes.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a>jour <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">jour =</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">10</span>))</span>
<span id="cb433-2"><a href="#cb433-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(jour)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  1 variable:
##  $ jour: num  1 1 1 1 1 1 1 1 1 1</code></pre>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true" tabindex="-1"></a>autre <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(des_plus, jour)</span>
<span id="cb435-2"><a href="#cb435-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(autre)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  4 variables:
##  $ de1    : num  2 3 4 1 2 3 5 6 5 4
##  $ de2    : num  1 4 2 3 5 4 6 2 5 3
##  $ lanceur: chr  &quot;Luc&quot; &quot;Luc&quot; &quot;Luc&quot; &quot;Luc&quot; ...
##  $ jour   : num  1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
<div id="fonctions-rbind-et-cbind-2" class="section level3" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> Fonctions <code>rbind</code> et <code>cbind</code></h3>
<p>Une concaténation de data frames peut aussi s’effectuer avec les fonctions <code>rbind</code> et <code>cbind</code>. Comme avec une matrice, <code>rbind</code> effectue une concaténation en lignes et <code>cbind</code> en colonnes.</p>
<p>La fonction <code>rbind</code> permet donc de mettre en commun les observations de plusieurs data frames, comme dans cet exemple.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="#cb437-1" aria-hidden="true" tabindex="-1"></a>des_plus_exp_2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">de1 =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>), <span class="at">de2 =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>), <span class="at">lanceur =</span> <span class="st">&quot;Paul&quot;</span>)</span>
<span id="cb437-2"><a href="#cb437-2" aria-hidden="true" tabindex="-1"></a>des_plus_exp_3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">de1 =</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">1</span>), <span class="at">de2 =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>), <span class="at">lanceur =</span> <span class="st">&quot;Paul&quot;</span>)</span>
<span id="cb437-3"><a href="#cb437-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(des_plus, des_plus_exp_2, des_plus_exp_3)</span></code></pre></div>
<pre><code>##     de1 de2 lanceur
## l1    2   1     Luc
## l2    3   4     Luc
## l3    4   2     Luc
## l4    1   3     Luc
## l5    2   5     Luc
## l6    3   4     Kim
## l7    5   6     Kim
## l8    6   2     Kim
## l9    5   5     Kim
## l10   4   3     Kim
## 1     3   4    Paul
## 2     5   2    Paul
## 11    6   2    Paul
## 21    1   5    Paul</code></pre>
<p>Pour que la concaténation fonctionne, les noms des variables (colonnes) dans les data frames doivent concorder.</p>
<p>Une concaténation de data frames avec <code>cbind</code> est quant à elle similaire à une concaténation avec <code>data.frame</code> : des variables sont rassemblées dans un seul data frame.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(des_plus, jour)</span></code></pre></div>
<pre><code>##     de1 de2 lanceur jour
## l1    2   1     Luc    1
## l2    3   4     Luc    1
## l3    4   2     Luc    1
## l4    1   3     Luc    1
## l5    2   5     Luc    1
## l6    3   4     Kim    1
## l7    5   6     Kim    1
## l8    6   2     Kim    1
## l9    5   5     Kim    1
## l10   4   3     Kim    1</code></pre>
<p>Cette fois, les noms des observations (lignes) n’ont pas besoin de concorder entre les data frames, mais les nombres d’observations doivent être égaux.</p>
</div>
</div>
<div id="métadonnées-4" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Métadonnées</h2>
<p>La fonction <code>data.frame</code> attribue toujours par défaut des noms aux lignes et colonnes des data frames qu’elle crée. Voyons un exemple.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="#cb441-1" aria-hidden="true" tabindex="-1"></a>essai <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb441-2"><a href="#cb441-2" aria-hidden="true" tabindex="-1"></a>essai</span></code></pre></div>
<pre><code>##   X1.5 letters.1.5.
## 1    1            a
## 2    2            b
## 3    3            c
## 4    4            d
## 5    5            e</code></pre>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(essai)</span></code></pre></div>
<pre><code>## $names
## [1] &quot;X1.5&quot;         &quot;letters.1.5.&quot;
## 
## $class
## [1] &quot;data.frame&quot;
## 
## $row.names
## [1] 1 2 3 4 5</code></pre>
<p>Les noms par défaut des colonnes ne sont pas toujours pertinents. Il vaut donc mieux nommer les colonnes lors de la création, directement dans l’appel à la fonction <code>data.frame</code>. Pour ce faire, il suffit de précéder les éléments à combiner d’un nom et de l’opérateur <code>=</code>, comme dans cet exemple.</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">chiffre =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lettre =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span></code></pre></div>
<pre><code>##   chiffre lettre
## 1       1      a
## 2       2      b
## 3       3      c
## 4       4      d
## 5       5      e</code></pre>
<p>Avec cette technique, les noms ont besoin d’être encadrés de guillemets uniquement s’ils comprennent un ou des espaces.</p>
<p>Les noms des colonnes d’un data frame peuvent aussi être remplacés a posteriori avec la fonction <code>names</code> ou <code>colnames</code> accompagnée d’une assignation.</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(essai) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;chiffre&quot;</span>, <span class="st">&quot;lettre&quot;</span>)</span></code></pre></div>
</div>
<div id="extraction-déléments-4" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Extraction d’éléments</h2>
<p>L’extraction d’éléments d’un data frame s’effectue comme pour une liste ou encore comme pour une matrice. Les deux options sont possibles.</p>
<div id="en-traitant-le-data-frame-comme-une-liste" class="section level3" number="6.6.1">
<h3><span class="header-section-number">6.6.1</span> En traitant le data frame comme une liste</h3>
<p>Comme il a déjà été mentionné à quelques reprises maintenant, le data frame est un objet récursif et ses éléments sont ses colonnes. Alors, extraire des éléments d’un data frame signifie extraire des colonnes.</p>
<p>Tous les opérateurs d’indiçage introduits plus tôt fonctionnent avec le data frame, comme le démontre ces exemples.</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true" tabindex="-1"></a>des_plus[<span class="fu">c</span>(<span class="st">&quot;de1&quot;</span>, <span class="st">&quot;de2&quot;</span>)]</span></code></pre></div>
<pre><code>##     de1 de2
## l1    2   1
## l2    3   4
## l3    4   2
## l4    1   3
## l5    2   5
## l6    3   4
## l7    5   6
## l8    6   2
## l9    5   5
## l10   4   3</code></pre>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true" tabindex="-1"></a>des_plus[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>##  [1] 2 3 4 1 2 3 5 6 5 4</code></pre>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true" tabindex="-1"></a>des_plus<span class="sc">$</span>de1</span></code></pre></div>
<pre><code>##  [1] 2 3 4 1 2 3 5 6 5 4</code></pre>
</div>
<div id="en-traitant-le-data-frame-comme-une-matrice" class="section level3" number="6.6.2">
<h3><span class="header-section-number">6.6.2</span> En traitant le data frame comme une matrice</h3>
<p>Il est aussi possible d’exploiter les deux dimensions du data frame et d’extraire des éléments de ses colonnes. Pour ce faire, il faut simplement traiter le data frame comme une matrice et fournir deux arguments à l’opérateur d’indiçage <code>[</code> ou <code>[[</code> : le premier pour identifier des lignes, le deuxième pour identifier des colonnes. Voici quelques exemples.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true" tabindex="-1"></a>des_plus[, <span class="st">&quot;de1&quot;</span>]</span></code></pre></div>
<pre><code>##  [1] 2 3 4 1 2 3 5 6 5 4</code></pre>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a>des_plus[<span class="fu">c</span>(<span class="fu">rep</span>(<span class="cn">FALSE</span>, <span class="dv">6</span>), <span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="dv">3</span>), <span class="cn">FALSE</span>), <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>##    de2 lanceur
## l7   6     Kim
## l8   2     Kim
## l9   5     Kim</code></pre>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a>des_plus[[<span class="dv">1</span>, <span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="extraction-par-exclusion-2" class="section level3" number="6.6.3">
<h3><span class="header-section-number">6.6.3</span> Extraction par exclusion</h3>
<p>Comme pour une liste, assigner la valeur NULL à un élément d’un data frame l’efface de celui-ci, comme dans cet exemple.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true" tabindex="-1"></a>autre<span class="sc">$</span>jour <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb460-2"><a href="#cb460-2" aria-hidden="true" tabindex="-1"></a>autre</span></code></pre></div>
<pre><code>##     de1 de2 lanceur
## l1    2   1     Luc
## l2    3   4     Luc
## l3    4   2     Luc
## l4    1   3     Luc
## l5    2   5     Luc
## l6    3   4     Kim
## l7    5   6     Kim
## l8    6   2     Kim
## l9    5   5     Kim
## l10   4   3     Kim</code></pre>
</div>
</div>
<div id="extensions" class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> Extensions</h2>
<p>Certains packages R offrent des structures de données alternatives au data frame. Deux de ces structures sont mentionnées ici, car elles sont de plus en plus utilisées dans la communauté R. Elles ne sont cependant pas approfondies.</p>
<div id="tibbles" class="section level3" number="6.7.1">
<h3><span class="header-section-number">6.7.1</span> Tibbles</h3>
<p>Les packages du <a href="https://www.tidyverse.org/"><code>tidyverse</code></a> utilisent des <a href="http://tibble.tidyverse.org/articles/tibble.html">tibbles</a> en remplacement des data frames. Le <code>tidyverse</code> est une collection de packages dit être spécialisés en « science des données ». Plusieurs des développeurs de ces packages sont affiliés à <a href="https://www.rstudio.com/">RStudio</a>. Cette collection comprend notamment le très populaire package <a href="http://ggplot2.tidyverse.org/"><code>ggplot2</code></a> et d’autres packages développés par Hadley Wickham.</p>
<p>Voyons un exemple de tibble.</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb462-2"><a href="#cb462-2" aria-hidden="true" tabindex="-1"></a>des_plus_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb462-3"><a href="#cb462-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">de1 =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">4</span>),</span>
<span id="cb462-4"><a href="#cb462-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">de2 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>), </span>
<span id="cb462-5"><a href="#cb462-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">lanceur =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Luc&quot;</span>, <span class="st">&quot;Kim&quot;</span>), <span class="at">each =</span> <span class="dv">5</span>)</span>
<span id="cb462-6"><a href="#cb462-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb462-7"><a href="#cb462-7" aria-hidden="true" tabindex="-1"></a>des_plus_tibble</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##      de1   de2 lanceur
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  
##  1     2     1 Luc    
##  2     3     4 Luc    
##  3     4     2 Luc    
##  4     1     3 Luc    
##  5     2     5 Luc    
##  6     3     4 Kim    
##  7     5     6 Kim    
##  8     6     2 Kim    
##  9     5     5 Kim    
## 10     4     3 Kim</code></pre>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(des_plus_tibble)</span></code></pre></div>
<pre><code>## tibble [10 x 3] (S3: tbl_df/tbl/data.frame)
##  $ de1    : num [1:10] 2 3 4 1 2 3 5 6 5 4
##  $ de2    : num [1:10] 1 4 2 3 5 4 6 2 5 3
##  $ lanceur: chr [1:10] &quot;Luc&quot; &quot;Luc&quot; &quot;Luc&quot; &quot;Luc&quot; ...</code></pre>
<p>Un tibble se manipule comme un data frame, mais il possède les distinctions suivantes :</p>
<ul>
<li>l’affichage (<em>print</em>) a été repensé : pas plus de 10 lignes affichées par défaut, abréviations des types des colonnes affichées;</li>
<li>l’extraction d’éléments d’un tibble avec l’opérateur <code>[</code> retourne toujours un autre tibble, sa sortie n’est jamais simplifiée (pas d’argument <code>drop</code>);</li>
<li>la règle de recyclage lors de la création d’un tibble s’applique seulement pour des vecteurs de longueur unitaire;</li>
<li>certaines opérations d’extraction sont plus rapides.</li>
</ul>
<p style="font-size:110%">
<strong>Pour en apprendre davantage :</strong>
</p>
<p>Voici quelques références pour ceux intéressés à en apprendre davantage à propos des tibbles :</p>
<ul>
<li><a href="http://tibble.tidyverse.org/articles/tibble.html" class="uri">http://tibble.tidyverse.org/articles/tibble.html</a></li>
<li><a href="http://r4ds.had.co.nz/tibbles.html" class="uri">http://r4ds.had.co.nz/tibbles.html</a></li>
<li><a href="http://blog.jumpingrivers.com/posts/2018/trouble_with_tibbles/" class="uri">http://blog.jumpingrivers.com/posts/2018/trouble_with_tibbles/</a></li>
</ul>
</div>
<div id="data-tables" class="section level3" number="6.7.2">
<h3><span class="header-section-number">6.7.2</span> Data tables</h3>
<p>Le <a href="https://rdatatable.gitlab.io/data.table/">data table</a> est une extension du data frame développée dans le but de rendre plus rapides et conviviales les manipulations de jeu de données en R.</p>
<p>Voyons un exemple de data table.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb466-2"><a href="#cb466-2" aria-hidden="true" tabindex="-1"></a>des_plus_data_table <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb466-3"><a href="#cb466-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">de1 =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">4</span>),</span>
<span id="cb466-4"><a href="#cb466-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">de2 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>),</span>
<span id="cb466-5"><a href="#cb466-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">lanceur =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Luc&quot;</span>, <span class="st">&quot;Kim&quot;</span>), <span class="at">each =</span> <span class="dv">5</span>)</span>
<span id="cb466-6"><a href="#cb466-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb466-7"><a href="#cb466-7" aria-hidden="true" tabindex="-1"></a>des_plus_data_table</span></code></pre></div>
<pre><code>##     de1 de2 lanceur
##  1:   2   1     Luc
##  2:   3   4     Luc
##  3:   4   2     Luc
##  4:   1   3     Luc
##  5:   2   5     Luc
##  6:   3   4     Kim
##  7:   5   6     Kim
##  8:   6   2     Kim
##  9:   5   5     Kim
## 10:   4   3     Kim</code></pre>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(des_plus_data_table)</span></code></pre></div>
<pre><code>## Classes &#39;data.table&#39; and &#39;data.frame&#39;:   10 obs. of  3 variables:
##  $ de1    : num  2 3 4 1 2 3 5 6 5 4
##  $ de2    : num  1 4 2 3 5 4 6 2 5 3
##  $ lanceur: chr  &quot;Luc&quot; &quot;Luc&quot; &quot;Luc&quot; &quot;Luc&quot; ...
##  - attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt;</code></pre>
<p>La force du data table est la rapidité d’exécution des manipulations et la possibilité d’en faire beaucoup plus avec l’opérateur <code>[</code> comparativement au data frame. Pour illustrer ce dernier point, voici un exemple de calcul de statistiques descriptives avec l’opérateur <code>[</code>.</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="#cb470-1" aria-hidden="true" tabindex="-1"></a>des_plus_data_table[</span>
<span id="cb470-2"><a href="#cb470-2" aria-hidden="true" tabindex="-1"></a>  j <span class="ot">=</span> .(<span class="at">moy_de1 =</span> <span class="fu">mean</span>(de1), <span class="at">moy_de2 =</span> <span class="fu">mean</span>(de2)), </span>
<span id="cb470-3"><a href="#cb470-3" aria-hidden="true" tabindex="-1"></a>  by <span class="ot">=</span> lanceur</span>
<span id="cb470-4"><a href="#cb470-4" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div>
<pre><code>##    lanceur moy_de1 moy_de2
## 1:     Luc     2.4       3
## 2:     Kim     4.6       4</code></pre>
<p>Les deux premiers arguments (<code>i</code> et <code>j</code>) de l’opérateur <code>[</code> acceptent plus de valeurs pour un data table que pour un data frame. Dans le cas d’un data frame, ces arguments servent uniquement à identifier des lignes et des colonnes. Pour un data table, ils ont plus d’utilités et servent notamment à demander le calcul de statistiques sur une partie des données. Dans l’exemple ci-dessus, le calcul de moyennes sur les variables <code>de1</code> et <code>de2</code> est demandé. La syntaxe pour demander de tels calculs est simple.</p>
<p>De plus, l’opérateur <code>[</code> pour le data table possède plusieurs autres arguments, dont l’argument <code>by</code>. Dans la commande précédente, l’argument <code>by</code> a permis de demander un calcul distinct selon la valeur d’une variable.</p>
<p>Dans les valeurs fournies aux arguments de l’opérateur <code>[</code> pour le data table, il est possible de référer aux colonnes du data table par leurs noms sans encadrer ces noms de guillemets.</p>
<p>Nous verrons dans un prochain cours comment produire avec les fonctionnalités de base de R les mêmes calculs que ceux de l’exemple exploité ici.</p>
<p style="font-size:110%">
<strong>Pour en apprendre davantage :</strong>
</p>
<p>Voici quelques références pour ceux intéressés à en apprendre davantage à propos des data tables :</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html" class="uri">https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html</a></li>
<li><a href="https://rdatatable.gitlab.io/data.table/" class="uri">https://rdatatable.gitlab.io/data.table/</a></li>
<li><a href="https://stt4230.rbind.io/tutoriels_etudiants/hiver_2017/data.table/" class="uri">https://stt4230.rbind.io/tutoriels_etudiants/hiver_2017/data.table/</a></li>
</ul>
<hr />
</div>
</div>
</div>
<div id="facteurs" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Facteurs</h1>
<p>Le facteur possède plusieurs propriétés du vecteur, mais il est conçu pour stocker les valeurs observées d’une variable catégorique. Son nom vient de la terminologie utilisée en analyse de la variance (ANOVA).</p>
<div id="obtention-dinformations-5" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Obtention d’informations</h2>
<p>Reprenons l’exemple en introduction.</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="#cb472-1" aria-hidden="true" tabindex="-1"></a>fac</span></code></pre></div>
<pre><code>## [1] 5 2 5 5
## Levels: 2 5</code></pre>
<p>Le facteur possède des attributs de plus qu’un vecteur, soit un identifiant de ses niveaux (modalités possibles) ainsi qu’une classe pour spécifier qu’il s’agit d’un facteur.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(fac)</span></code></pre></div>
<pre><code>## $levels
## [1] &quot;2&quot; &quot;5&quot;
## 
## $class
## [1] &quot;factor&quot;</code></pre>
<p>La fonction <code>levels</code> retourne les niveaux d’un facteur, et la fonction <code>nlevels</code> retourne le nombre de niveaux.</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(fac)</span></code></pre></div>
<pre><code>## [1] &quot;2&quot; &quot;5&quot;</code></pre>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(fac)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Pour prendre le moins de place possible en mémoire, les données dans un facteur sont toujours stockées sous la forme d’entiers : les chiffres 1 à disons <span class="math inline">\(l\)</span> où <span class="math inline">\(l\)</span> est le nombre de niveaux du facteur. La sortie de <code>str</code> avec un facteur affiche ces entiers.</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fac)</span></code></pre></div>
<pre><code>##  Factor w/ 2 levels &quot;2&quot;,&quot;5&quot;: 2 1 2 2</code></pre>
<p>Cependant, les niveaux, ou modalités, du facteur sont stockés sous forme de caractère, peu importe leur nature d’origine.</p>
</div>
<div id="création-5" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Création</h2>
<div id="fonctions-factor-et-as.factor" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Fonctions <code>factor</code> et <code>as.factor</code></h3>
<p>Pour créer un facteur de toutes pièces, il faut faire appel à la fonction <code>factor</code> ou <code>as.factor</code>.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="#cb482-1" aria-hidden="true" tabindex="-1"></a>reponses <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;roche&quot;</span>, <span class="st">&quot;papier&quot;</span>, <span class="st">&quot;ciseau&quot;</span>), <span class="at">times =</span> <span class="dv">3</span>))</span>
<span id="cb482-2"><a href="#cb482-2" aria-hidden="true" tabindex="-1"></a>reponses</span></code></pre></div>
<pre><code>## [1] roche  papier ciseau roche  papier ciseau roche  papier ciseau
## Levels: ciseau papier roche</code></pre>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(reponses)</span></code></pre></div>
<pre><code>##  Factor w/ 3 levels &quot;ciseau&quot;,&quot;papier&quot;,..: 3 2 1 3 2 1 3 2 1</code></pre>
<p>Les niveaux du facteur sont extraits automatiquement par la fonction <code>factor</code> et placés en ordre alphanumérique. Pour contrôler l’ordre des facteurs, il faut spécifier cet ordre dans la commande de création du facteur avec l’argument <code>levels</code>.</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="#cb486-1" aria-hidden="true" tabindex="-1"></a>reponses <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb486-2"><a href="#cb486-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;roche&quot;</span>, <span class="st">&quot;papier&quot;</span>, <span class="st">&quot;ciseau&quot;</span>), <span class="at">times =</span> <span class="dv">3</span>),</span>
<span id="cb486-3"><a href="#cb486-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;roche&quot;</span>, <span class="st">&quot;papier&quot;</span>, <span class="st">&quot;ciseau&quot;</span>)</span>
<span id="cb486-4"><a href="#cb486-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb486-5"><a href="#cb486-5" aria-hidden="true" tabindex="-1"></a>reponses</span></code></pre></div>
<pre><code>## [1] roche  papier ciseau roche  papier ciseau roche  papier ciseau
## Levels: roche papier ciseau</code></pre>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(reponses)</span></code></pre></div>
<pre><code>##  Factor w/ 3 levels &quot;roche&quot;,&quot;papier&quot;,..: 1 2 3 1 2 3 1 2 3</code></pre>
<p>Il est utile de contrôler l’ordre des niveaux d’un facteur, car dans des sorties ou graphiques produits avec un facteur, l’ordre de ses niveaux est respecté.</p>
<p>La fonction <code>as.factor</code> agit comme la fonction <code>factor</code>, mais elle ne possède pas d’arguments supplémentaires au vecteur à transformer.</p>
</div>
</div>
<div id="modification" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Modification</h2>
<div id="fonction-levels" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Fonction <code>levels</code></h3>
<p>Pour modifier les libellés des niveaux, il suffit de combiner l’utilisation de la fonction <code>levels</code> à une assignation de données comme suit.</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(reponses) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;pomme&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;poire&quot;</span>)</span>
<span id="cb490-2"><a href="#cb490-2" aria-hidden="true" tabindex="-1"></a>reponses</span></code></pre></div>
<pre><code>## [1] pomme  orange poire  pomme  orange poire  pomme  orange poire 
## Levels: pomme orange poire</code></pre>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(reponses)</span></code></pre></div>
<pre><code>##  Factor w/ 3 levels &quot;pomme&quot;,&quot;orange&quot;,..: 1 2 3 1 2 3 1 2 3</code></pre>
</div>
<div id="réordonnancement-des-niveaux" class="section level3" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Réordonnancement des niveaux</h3>
<p>Il est toujours possible de modifier l’ordre des niveaux d’un facteur après sa création. Pour ce faire, il faut de nouveau faire appel à la fonction <code>factor</code>, en lui donnant en entrée le facteur et les niveaux dans l’ordre désiré. En réassignant le résultat au nom du facteur, il en ressort modifié, comme dans l’exemple suivant.</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="#cb494-1" aria-hidden="true" tabindex="-1"></a>reponses <span class="ot">&lt;-</span> <span class="fu">factor</span>(reponses, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;poire&quot;</span>, <span class="st">&quot;pomme&quot;</span>, <span class="st">&quot;orange&quot;</span>))</span>
<span id="cb494-2"><a href="#cb494-2" aria-hidden="true" tabindex="-1"></a>reponses</span></code></pre></div>
<pre><code>## [1] pomme  orange poire  pomme  orange poire  pomme  orange poire 
## Levels: poire pomme orange</code></pre>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(reponses)</span></code></pre></div>
<pre><code>##  Factor w/ 3 levels &quot;poire&quot;,&quot;pomme&quot;,..: 2 3 1 2 3 1 2 3 1</code></pre>
</div>
</div>
<div id="métadonnées-5" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Métadonnées</h2>
<p>Les éléments d’un facteur peuvent être nommés, comme pour un vecteur.</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(reponses) <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>]</span>
<span id="cb498-2"><a href="#cb498-2" aria-hidden="true" tabindex="-1"></a>reponses</span></code></pre></div>
<pre><code>##      a      b      c      d      e      f      g      h      i 
##  pomme orange  poire  pomme orange  poire  pomme orange  poire 
## Levels: poire pomme orange</code></pre>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(reponses)</span></code></pre></div>
<pre><code>##  Factor w/ 3 levels &quot;poire&quot;,&quot;pomme&quot;,..: 2 3 1 2 3 1 2 3 1
##  - attr(*, &quot;names&quot;)= chr [1:9] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...</code></pre>
</div>
<div id="extraction-déléments-5" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Extraction d’éléments</h2>
<p>L’extraction d’éléments d’un facteur se réalise comme avec un vecteur. Par exemple :</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="#cb502-1" aria-hidden="true" tabindex="-1"></a>extrait <span class="ot">&lt;-</span> reponses[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb502-2"><a href="#cb502-2" aria-hidden="true" tabindex="-1"></a>extrait</span></code></pre></div>
<pre><code>##      a      b 
##  pomme orange 
## Levels: poire pomme orange</code></pre>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(extrait)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Ici, aucun élément contenant la modalité <code>poire</code> n’est conservé. Pourtant, dans les métadonnées du facteur, il est encore inscrit que le facteur possède 3 niveaux. Pour effacer des métadonnées d’un facteur les niveaux non observés, il faut utiliser la fonction <code>droplevels</code>.</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="#cb506-1" aria-hidden="true" tabindex="-1"></a>extrait_2 <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(extrait)</span>
<span id="cb506-2"><a href="#cb506-2" aria-hidden="true" tabindex="-1"></a>extrait_2</span></code></pre></div>
<pre><code>##      a      b 
##  pomme orange 
## Levels: pomme orange</code></pre>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="#cb508-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(extrait_2)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="facteurs-ordonnés" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Facteurs ordonnés</h2>
<p>Il est possible de spécifier un ordre dans les valeurs des niveaux d’un facteur. Il ne s’agit pas ici simplement de l’ordre dans lequel sont placés les niveaux qui a été mentionné précédemment. Il s’agit plutôt des valeurs relatives des niveaux les uns par rapport aux autres. Pour une variable catégorique ordinale, les modalités ou niveaux de la variable peuvent être ordonnés. Il existe une structure de données R pour stocker une telle variable. Il s’agit des facteurs ordonnés.</p>
<p>Créons par exemple un facteur ordonné contenant des niveaux de satisfaction de clients.</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="#cb510-1" aria-hidden="true" tabindex="-1"></a>satisfaction <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb510-2"><a href="#cb510-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;très satisfait&quot;</span>, <span class="st">&quot;satisfait&quot;</span>, <span class="st">&quot;très satisfait&quot;</span>, <span class="st">&quot;insatisfait&quot;</span>, </span>
<span id="cb510-3"><a href="#cb510-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;très satisfait&quot;</span>, <span class="st">&quot;satisfait&quot;</span>, <span class="st">&quot;satisfait&quot;</span>),</span>
<span id="cb510-4"><a href="#cb510-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;très insatisfait&quot;</span>, <span class="st">&quot;insatisfait&quot;</span>, <span class="st">&quot;satisfait&quot;</span>, <span class="st">&quot;très satisfait&quot;</span>),</span>
<span id="cb510-5"><a href="#cb510-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb510-6"><a href="#cb510-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb510-7"><a href="#cb510-7" aria-hidden="true" tabindex="-1"></a>satisfaction</span></code></pre></div>
<pre><code>## [1] très satisfait satisfait      très satisfait insatisfait    très satisfait
## [6] satisfait      satisfait     
## Levels: très insatisfait &lt; insatisfait &lt; satisfait &lt; très satisfait</code></pre>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="#cb512-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(satisfaction)</span></code></pre></div>
<pre><code>##  Ord.factor w/ 4 levels &quot;très insatisfait&quot;&lt;..: 4 3 4 2 4 3 3</code></pre>
<p>Grâce à l’argument <code>ordered = TRUE</code>, l’objet obtenu est plus qu’un facteur. Il s’agit d’un facteur ordonné. La distinction ente le facteur et le facteur ordonné est utilisée par certaines fonctions R, notamment des fonctions d’ajustement de modèles.</p>
<hr />
</div>
</div>
<div id="conversions" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Conversions de type de données</h1>
<p>Rappelons-nous que tous les éléments d’un objet atomique doivent être du même type. Que se passe-t-il alors si nous tentons de modifier un élément d’un vecteur pour le remplacer par une donnée d’un type différent du type des éléments d’origine dans le vecteur?</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="#cb514-1" aria-hidden="true" tabindex="-1"></a>de <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">4</span>)</span>
<span id="cb514-2"><a href="#cb514-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(de)</span></code></pre></div>
<pre><code>##  num [1:10] 2 3 4 1 2 3 5 6 5 4</code></pre>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="#cb516-1" aria-hidden="true" tabindex="-1"></a>de[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;2&quot;</span></span>
<span id="cb516-2"><a href="#cb516-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(de)</span></code></pre></div>
<pre><code>##  chr [1:10] &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;5&quot; &quot;6&quot; &quot;5&quot; &quot;4&quot;</code></pre>
<p>Dans l’exemple ci-dessus, tous les éléments, à l’origine réels, sont devenus des chaînes de caractères, soit le type de la nouvelle donnée.</p>
<p>Voici un autre exemple.</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="#cb518-1" aria-hidden="true" tabindex="-1"></a>de[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb518-2"><a href="#cb518-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(de)</span></code></pre></div>
<pre><code>##  chr [1:10] &quot;FALSE&quot; &quot;3&quot; &quot;4&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;5&quot; &quot;6&quot; &quot;5&quot; &quot;4&quot;</code></pre>
<p>Cette fois, c’est le type de la nouvelle donnée qui a été modifié pour être conforme aux éléments déjà présents dans le vecteur. La nouvelle donnée, à l’origine logique, a été transformée en chaîne de caractères.</p>
<p>Les exemples précédents illustrent la conversion implicite de types. Ces conversions sont qualifiées d’« implicites », car l’utilisateur n’a pas indiqué clairement à R ce qu’il doit faire. Il n’est pas possible de stocker dans un vecteur des éléments de types différents. Ce qui était demandé à R dans ces exemples était donc en théorie incorrect. Plusieurs langages de programmation génèrent une erreur suite à une telle tentative d’opération.</p>
<p>Cependant, R étant conçu pour des gens qui s’y connaissent parfois peu en informatique, il ne génère pas d’erreur. Il arrange les choses pour l’utilisateur. Il fait une conversion de type des données sans même imprimer un message d’avertissement. Lorsqu’il doit choisir entre deux types de données, il opte toujours pour le type le moins contraignant des deux. Pour les types que nous utiliserons dans ce cours, leur classement du moins contraignant au plus contraignant est le suivant :</p>
<blockquote>
<p>caractère &gt; réel &gt; entier &gt; logique.</p>
</blockquote>
<div id="conversions-explicites" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Conversions explicites</h2>
<p>Afin de s’assurer de garder le contrôle de nos objets, il est aussi possible de réaliser des conversions explicites avec les fonctions <code>as.</code>(<code>character</code>/<code>numeric</code>/<code>double</code>/<code>integer</code>/<code>logical</code>/…). Une conversion est dite « explicite » lorsque l’utilisateur indique à R vers quel type faire la conversion.</p>
<p><strong>Exemple</strong> : Comment créer un vecteur d’entiers?</p>
<ul>
<li>l’opérateur <code>:</code> crée par défaut des vecteurs d’entiers lorsque la valeur de départ est un entier</li>
</ul>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="#cb520-1" aria-hidden="true" tabindex="-1"></a>vect_1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb520-2"><a href="#cb520-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vect_1)</span></code></pre></div>
<pre><code>##  int [1:3] 1 2 3</code></pre>
<ul>
<li>la fonction <code>as.integer</code> effectue la conversion vers le type entier</li>
</ul>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="#cb522-1" aria-hidden="true" tabindex="-1"></a>vect_2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb522-2"><a href="#cb522-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vect_2)</span></code></pre></div>
<pre><code>##  num [1:3] 1 2 3</code></pre>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="#cb524-1" aria-hidden="true" tabindex="-1"></a>vect_3 <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(vect_2)</span>
<span id="cb524-2"><a href="#cb524-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vect_3)</span></code></pre></div>
<pre><code>##  int [1:3] 1 2 3</code></pre>
<ul>
<li>le caractère <code>L</code> placé tout de suite après un nombre entier (sans espace entre le nombre et <code>L</code>) est un indicateur du type entier</li>
</ul>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="#cb526-1" aria-hidden="true" tabindex="-1"></a>vect_4 <span class="ot">&lt;-</span> <span class="fu">c</span>(1L, 2L, 3L)</span>
<span id="cb526-2"><a href="#cb526-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vect_4)</span></code></pre></div>
<pre><code>##  int [1:3] 1 2 3</code></pre>
<p>Les conversions implicites de type permettent d’éviter des erreurs. Voici une assignation qui retourne le résultat escompté en R grâce aux conversions implicites de type, mais qui ne retournerait pas le résultat escompté dans certains autres langages.</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="#cb528-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(1L, 4L) <span class="co"># x est d&#39;abord créé avec le type entier</span></span>
<span id="cb528-2"><a href="#cb528-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="#cb530-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">2</span></span>
<span id="cb530-2"><a href="#cb530-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 0.5 4.0</code></pre>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="#cb532-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<p>L’objet <code>x</code> a changé le type de ses éléments afin de pouvoir garder en mémoire correctement la nouvelle donnée assignée à son premier élément. Dans d’autres langages, par exemple en C, la donnée <code>0.5</code> aurait été tronquée à <code>0</code>.</p>
<p style="font-size:110%">
<strong>Conversions explicites de chaînes de caractères vers des nombres</strong>
</p>
<p>Il est même possible de convertir certains caractères en nombres. Lorsque la chaîne de caractères contient en fait des caractères numériques utilisant le point comme signe décimal, la conversion est directe avec <code>as.numeric</code> (ou <code>as.double</code> ou <code>as.integer</code>).</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="#cb534-1" aria-hidden="true" tabindex="-1"></a>vect_5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;3.5&quot;</span>, <span class="st">&quot;4.6&quot;</span>, <span class="st">&quot;7&quot;</span>)</span>
<span id="cb534-2"><a href="#cb534-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(vect_5)  </span></code></pre></div>
<pre><code>## [1] 3.5 4.6 7.0</code></pre>
<p>Pour les cas particuliers, il faut plutôt utiliser la fonction <code>type.convert</code>.</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="#cb536-1" aria-hidden="true" tabindex="-1"></a>vect_6 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;3,5&quot;</span>, <span class="st">&quot;4,6&quot;</span>, <span class="st">&quot;-&quot;</span>)</span>
<span id="cb536-2"><a href="#cb536-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(vect_6)  </span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>## [1] NA NA NA</code></pre>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="#cb539-1" aria-hidden="true" tabindex="-1"></a><span class="fu">type.convert</span>(vect_6, <span class="at">na.strings =</span> <span class="st">&quot;-&quot;</span>, <span class="at">dec =</span> <span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 3.5 4.6  NA</code></pre>
<hr />
</div>
</div>
<div id="résumé" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Résumé</h1>
<p style="font-size:110%">
<strong>Contenant versus contenu</strong>
</p>
<p><strong>Objet</strong> R servant de structure de données = CONTENANT</p>
<p><strong>Éléments</strong> stockés dans cet objet = CONTENU :</p>
<ul>
<li><strong>données</strong> : valeurs observées de variables aléatoires, valeurs de résultats de calculs (ex.: statistiques descriptives, coefficients d’un modèle), etc.;</li>
<li><strong>métadonnées = attributs</strong> (souvent facultatifs) :<br />
nom des éléments (par dimension), taille des dimensions pour les matrices et arrays, niveaux d’un facteur, etc.</li>
</ul>
<p style="font-size:110%">
<strong>Caractéristiques des structures de données en R</strong>
</p>
<ul>
<li>Type de l’objet : <code>is.</code>(<code>atomic</code>/<code>recursive</code>), <code>is.</code>(<code>vector</code>/<code>matrix</code>/<code>array</code>/<code>list</code>/<code>data.frame</code>/<code>factor</code>)</li>
<li>Type des données en éléments : <code>typeof</code>, <code>is.</code>(<code>numeric</code>/<code>character</code>/<code>logical</code>/…)
<ul>
<li>valeurs numériques (<code>numeric</code>):<br />
entières (<code>integer</code>) ou réelles (<code>double</code>)</li>
<li>chaînes de caractères (<code>character</code>)</li>
<li>valeurs logiques (<code>logical</code>)</li>
<li>types moins communs de valeurs :<br />
nombres complexes (<code>complex</code>), bits (<code>raw</code>), etc.</li>
<li>si éléments = sous-objets (par exemple pour une liste ou un data frame), <code>typeof</code> retourne la valeur <code>"list"</code></li>
</ul></li>
<li>Nombre total d’éléments : <code>length</code></li>
</ul>
<p style="font-size:110%">
<strong>Types de structures de données en R</strong>
</p>
<table>
<thead>
<tr class="header">
<th>Nombre de dimensions</th>
<th>Objets atomiques</th>
<th>Objets récursifs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><strong>vecteur</strong></td>
<td><strong>liste</strong></td>
</tr>
<tr class="even">
<td>2</td>
<td><strong>matrice</strong></td>
<td><strong>data frame</strong></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
<td></td>
</tr>
<tr class="even">
<td>n</td>
<td><strong>array</strong></td>
<td>-</td>
</tr>
</tbody>
</table>
<!--
\begin{longtable}[]{@{}lll@{}}
\toprule
Nombre de dimensions & Objets atomiques & Objets
récursifs\tabularnewline
\midrule
\endhead
1 & \textbf{vecteur} & \textbf{liste}\tabularnewline
2 & \textbf{matrice} & \textbf{data frame}\tabularnewline
\(\vdots\) & \(\vdots\) &\tabularnewline
n & \textbf{array} & - \tabularnewline
\bottomrule
\end{longtable}
-->
<ul>
<li>Objets atomiques : Éléments = données toutes du même type</li>
<li>Objets récursifs : Éléments = objets de types quelconques</li>
</ul>
<p><strong>facteur</strong> = une généralisation du vecteur pour stocker les observations d’une variable catégorique</p>
<p style="font-size:110%">
<strong>Attributs selon le type d’objet</strong>
</p>
<p>Fonctions pour extraire des attributs : <code>attributes</code> (tous les attributs), <code>attr</code> (un seul attribut), <code>names</code>, <code>dimnames</code>, <code>colnames</code>, <code>rownames</code>, <code>dim</code>, <code>nrow</code>, <code>ncol</code>, <code>class</code>, <code>levels</code>, etc.</p>
<table>
<thead>
<tr class="header">
<th>Type d’objet</th>
<th><code>names</code></th>
<th><code>dimnames</code></th>
<th><code>dim</code></th>
<th><code>class</code></th>
<th><code>levels</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>vecteur</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td>-</td>
<td>-</td>
<td><span class="math inline">\(\bullet\)</span></td>
<td>-</td>
</tr>
<tr class="even">
<td>matrice ou array</td>
<td>-</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td><span class="math inline">\(\checkmark\)</span></td>
<td><span class="math inline">\(\bullet\)</span></td>
<td>-</td>
</tr>
<tr class="odd">
<td>liste</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td>-</td>
<td>-</td>
<td><span class="math inline">\(\bullet\)</span></td>
<td>-</td>
</tr>
<tr class="even">
<td>data frame</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td>(<span class="math inline">\(\checkmark\)</span>, <span class="math inline">\(\bullet\)</span>)</td>
<td><span class="math inline">\(\bullet\)</span></td>
<td><span class="math inline">\(\checkmark\)</span></td>
<td>-</td>
</tr>
<tr class="odd">
<td>facteur</td>
<td>(<span class="math inline">\(\checkmark\)</span>)</td>
<td>-</td>
<td>-</td>
<td><span class="math inline">\(\checkmark\)</span></td>
<td><span class="math inline">\(\checkmark\)</span></td>
</tr>
</tbody>
</table>
<!--
\begin{longtable}[]{@{}llllll@{}}
\toprule
Type d'objet & names & dimnames & dim & class & levels\tabularnewline
\midrule
\endhead
vecteur & (\(\checkmark\)) & - & - & \(\bullet\) & -\tabularnewline
matrice ou array & - & (\(\checkmark\)) & \(\checkmark\) & \(\bullet\) &
-\tabularnewline
liste & (\(\checkmark\)) & - & - & \(\bullet\) & -\tabularnewline
data frame & (\(\checkmark\)) & (\(\checkmark\), \(\bullet\)) &
\(\bullet\) & \(\checkmark\) & -\tabularnewline
facteur & (\(\checkmark\)) & - & - & \(\checkmark\) &
\(\checkmark\)\tabularnewline
\bottomrule
\end{longtable}
-->
<p>Légende :<br />
« - » = attribut non existant pour ce type d’objet<br />
« <span class="math inline">\(\checkmark\)</span> » = attribut existe (non obligatoire si encadré de parenthèses)<br />
« <span class="math inline">\(\bullet\)</span> » = métadonnée existante, mais pas dans les attributs obtenus avec la fonction <code>attributes</code></p>
<p style="font-size:110%">
<strong>Extraction d’éléments</strong>
</p>
<ul>
<li>Opérateurs d’indiçage :
<ul>
<li><code>[</code> : extrait un ou plusieurs éléments, préserve la structure de l’objet, sauf pour un objet à plus d’une dimension si une simplification est possible et <code>drop = TRUE</code> (<code>TRUE</code> est la valeur par défaut de l’argument);</li>
<li><code>[[</code> et <code>$</code> : extrait un seul élément, laisse tomber des attributs d’un objet atomique, sort de la structure d’un objet récursif<br />
(<code>$</code> s’utilise seulement avec des objets récursifs);<br />
</li>
</ul></li>
<li>Fonctions : <code>head</code>, <code>tail</code>, <code>subset</code>.</li>
</ul>
<p>Différentes façons d’identifier les éléments à extraire avec <code>[</code> :</p>
<ul>
<li>vecteur de nombre(s) positif(s) (entre 1 et la taille de la dimension concernée) :<br />
<em>positions des éléments à sélectionner</em>;</li>
<li>vecteur de nombre(s) négatif(s) (entre 1 et la taille de la dimension concernée) :<br />
<em>-1 <span class="math inline">\(\times\)</span> positions des éléments à mettre de côté</em>;</li>
<li>vecteur de chaîne(s) de caractères (possible seulement si les éléments sont nommés) :<br />
<em>noms des éléments à sélectionner</em>;</li>
<li>vecteur de logiques (de même longueur que la dimension concernée) :<br />
<code>TRUE</code> <em>pour les éléments à sélectionner,</em> <code>FALSE</code> <em>pour ceux à mettre de côté</em>;</li>
<li>rien : utile pour extraire tous les éléments selon une dimension.</li>
</ul>
<p style="font-size:110%">
<strong>Remplacement d’éléments dans un objet</strong>
</p>
<p>Afin de modifier des éléments dans un objet, il faut soumettre une commande contenant les 3 composantes suivantes :</p>
<ol style="list-style-type: decimal">
<li>une extraction avec l’opérateur <code>[</code>, <code>[[</code> ou <code>$</code> pour identifier les éléments à remplacer (ou simplement le nom de l’objet s’il doit être remplacé dans son entièreté),</li>
<li>un opérateur d’assignation (<code>&lt;-</code>),</li>
<li>les valeurs de remplacement, dans une structure correspondant à la section à remplacer dans l’objet, <em>par exemple :</em></li>
</ol>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="#cb541-1" aria-hidden="true" tabindex="-1"></a>matriceA[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)</span></code></pre></div>
<p style="font-size:110%">
<strong>Règle de recyclage</strong>
</p>
<p>Lors de toute opération faisant intervenir 2 vecteurs de longueurs différentes, les éléments du vecteur le plus court sont répétés de façon à ce que ce vecteur devienne de la même longueur que le vecteur le plus long.</p>
<p style="font-size:110%">
<strong>Conversions de types de données</strong>
</p>
<p>Les types de données communs, du moins contraignant au plus contraignant :</p>
<ul>
<li>caractères &gt; réels &gt; entiers &gt; logiques</li>
</ul>
<p>R fait automatiquement des <strong>conversions implicites</strong> en respectant cet ordonnancement des types de données.</p>
<p>Fonctions R pour effectuer des <strong>conversions explicites</strong> :<br />
<code>as.</code>(<code>character</code>/<code>double</code>/<code>integer</code>/<code>logical</code>), <code>type.convert</code></p>
<p style="font-size:110%">
<strong>Données manquantes</strong>
</p>
<p>Peu importe le type, une <strong>donnée manquante</strong> est toujours représentée en R par <code>NA</code>.</p>
<p style="font-size:110%">
<strong>Vecteurs</strong>
</p>
<p>Simple objet atomique à 1 dimension</p>
<ul>
<li>fonctions de création :
<ul>
<li><code>c</code>, <code>vector</code>, <code>as.vector</code>;</li>
<li>valeurs répétées : <code>rep</code>;</li>
<li>séquences régulières : <code>:</code>, <code>seq</code>;</li>
<li>chaînes de caractères : <code>paste</code>, <code>paste0</code>, constantes (<code>letters</code>, <code>LETTERS</code>, <code>month.name</code>, etc.).</li>
</ul></li>
<li>fonctions d’ajout de valeurs :
<ul>
<li>par concaténation d’un autre vecteur : <code>c</code>;</li>
<li><code>append</code>;</li>
</ul></li>
<li>comment réaliser une extraction avec un opérateur :
<ul>
<li><code>[</code> ou <code>[[</code> avec un seul argument.</li>
</ul></li>
</ul>
<p style="font-size:110%">
<strong>Matrice</strong>
</p>
<p>Généralisation du vecteur à 2 dimensions</p>
<ul>
<li>fonctions de création :
<ul>
<li><code>matrix</code>, <code>as.matrix</code>;</li>
<li>en combinant des vecteurs par lignes : <code>rbind</code>;</li>
<li>en combinant des vecteurs par colonnes : <code>cbind</code>;</li>
</ul></li>
<li>fonctions d’ajout de valeurs :
<ul>
<li>par concaténation d’une autre matrice ou d’un vecteur :<br />
<code>rbind</code>, <code>cbind</code>;</li>
</ul></li>
<li>comment réaliser une extraction avec un opérateur :
<ul>
<li><code>[</code> ou <code>[[</code> avec deux arguments, soit un par dimension (ne pas fournir de valeur pour les dimensions à conserver complètes).</li>
</ul></li>
</ul>
<p style="font-size:110%">
<strong>Arrays</strong>
</p>
<p>Généralisation du vecteur ou de la matrice à un nombre quelconque de dimensions</p>
<ul>
<li>fonctions de création :
<ul>
<li><code>array</code>, <code>as.array</code>;</li>
</ul></li>
<li>fonctions d’ajout de valeurs :
<ul>
<li>par concaténation d’un autre array :<br />
<code>abind</code> du package <code>abind</code> (pas vu dans le cours);</li>
</ul></li>
<li>comment réaliser une extraction avec un opérateur :
<ul>
<li><code>[</code> ou <code>[[</code> avec autant d’arguments qu’il y a de dimensions (ne pas fournir de valeur pour les dimensions à conserver complètes).</li>
</ul></li>
</ul>
<p style="font-size:110%">
<strong>Listes</strong>
</p>
<p>Objet récursif à 1 dimension</p>
<ul>
<li>fonctions de création :
<ul>
<li><code>list</code>, <code>as.list</code>, <code>vector</code>;</li>
</ul></li>
<li>fonctions d’ajout de valeurs :
<ul>
<li>par concaténation avec <code>c</code>;</li>
</ul></li>
<li>comment réaliser une extraction avec un opérateur :
<ul>
<li><code>[</code> ou <code>[[</code> avec un seul argument;</li>
<li>ou encore $ pour extraire un élément nommée.</li>
</ul></li>
</ul>
<p style="font-size:110%">
<strong>Data frames</strong>
</p>
<p>Objet récursif à 2 dimensions, conçu pour stocker :</p>
<ul>
<li>des jeux de données (ligne = observation, colonne = variable)
<ul>
<li><span class="math inline">\(\approx\)</span> liste de vecteurs ou facteurs de même longueur (un élément = une colonne);</li>
<li><span class="math inline">\(\approx\)</span> matrice avec données dont le type peut varier entre les colonnes;</li>
</ul></li>
<li>fonctions de création :
<ul>
<li><code>data.frame</code>, <code>as.data.frame</code>;</li>
</ul></li>
<li>fonctions d’ajout de valeurs :
<ul>
<li>par concaténation avec : <code>data.frame</code>, <code>cbind</code>, <code>rbind</code>;</li>
</ul></li>
<li>comment réaliser une extraction avec un opérateur :
<ul>
<li><code>[</code> ou <code>[[</code> avec 1 argument identifiant une ou des colonnes;</li>
<li><code>[</code> ou <code>[[</code> avec 2 arguments, soit un par dimension;</li>
<li>ou encore $ pour extraire une colonne nommée.</li>
</ul></li>
</ul>
<p style="font-size:110%">
<strong>Facteurs</strong>
</p>
<p>Généralisation du vecteur conçu pour stocker les valeurs observées d’une variable catégorique.</p>
<ul>
<li>fonctions de création : <code>factor</code>, <code>as.factor</code>;</li>
<li>fonctions en lien avec les niveaux du facteur :
<ul>
<li>pour extraire (ou modifier lorsqu’accompagné d’une assignation de valeurs) les niveaux : <code>levels</code>;</li>
<li>retourne le nombre de niveaux : <code>nlevels</code>;</li>
<li>pour éliminer des niveaux non présents : <code>droplevels</code>;</li>
</ul></li>
<li>comment réaliser une extraction avec un opérateur :
<ul>
<li><code>[</code> ou <code>[[</code> avec un seul argument.</li>
</ul></li>
</ul>
<hr />
</div>
<div id="références" class="section level1 unnumbered">
<h1>Références</h1>
<p style="font-size:110%">
<strong>Références citées dans le texte :</strong>
</p>
<div id="refs" class="references csl-bib-body">
<div id="ref-stat545flavor" class="csl-entry">
<div class="csl-right-inline">[1] Bryan, J. (2020). <em><span class="nocase">Data wrangling, exploration, and analysis with R &gt; Table of atomic R object flavors</span></em>. University of British Columbia et RStudio. URL <a href="https://stat545.com/r-objects.html#table-of-atomic-r-object-flavors">https://stat545.com/r-objects.html#table-of-atomic-r-object-flavors</a></div>
</div>
<div id="ref-tabfreq" class="csl-entry">
<div class="csl-right-inline">[2] Baillargeon, S., Rivest, L.-P., Simard, M., Ghazzali, N., Mérette, C., Belisle, C., Duchesne, T., Labbe, A. &amp; Lakhal-Chaieb, L. (2013). <em><span class="nocase">Analyse de tableaux de fréquences</span></em>. Notes de cours, STT-4400/STT-6210. Université Laval, Département de mathématiques et de statistique.</div>
</div>
</div>
<p style="font-size:110%">
<strong>Références supplémentaires :</strong>
</p>
<ul>
<li><p>R Core Team (2020). <em>An Introduction to R</em>. R version 4.0.3. URL <a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html</a></p></li>
<li><p>R Core Team (2020). <em>The R Language Definition</em>. R version 4.0.3. URL <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-lang.html</a></p></li>
<li><p>Wickham, H. (2019). <em>Advanced R</em>. 2e édition. Chapman and Hall/CRC.</p>
<ul>
<li><a href="https://adv-r.hadley.nz/vectors-chap.html" class="uri">https://adv-r.hadley.nz/vectors-chap.html</a>,</li>
<li><a href="https://adv-r.hadley.nz/subsetting.html" class="uri">https://adv-r.hadley.nz/subsetting.html</a>.</li>
</ul></li>
</ul>
<p>Rappel des références pour en apprendre davantage à propos des tibbles :</p>
<ul>
<li><a href="http://tibble.tidyverse.org/articles/tibble.html" class="uri">http://tibble.tidyverse.org/articles/tibble.html</a></li>
<li><a href="http://r4ds.had.co.nz/tibbles.html" class="uri">http://r4ds.had.co.nz/tibbles.html</a></li>
<li><a href="http://blog.jumpingrivers.com/posts/2018/trouble_with_tibbles/" class="uri">http://blog.jumpingrivers.com/posts/2018/trouble_with_tibbles/</a></li>
</ul>
<p>Rappel des références pour en apprendre davantage à propos des data tables :</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html" class="uri">https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html</a></li>
<li><a href="https://rdatatable.gitlab.io/data.table/" class="uri">https://rdatatable.gitlab.io/data.table/</a></li>
<li><a href="https://stt4230.rbind.io/tutoriels_etudiants/hiver_2017/data.table/" class="uri">https://stt4230.rbind.io/tutoriels_etudiants/hiver_2017/data.table/</a></li>
</ul>
</div>
